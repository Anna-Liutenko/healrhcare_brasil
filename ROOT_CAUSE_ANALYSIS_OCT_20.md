# üîç ROOT CAUSE ANALYSIS: –ü–æ—á–µ–º—É –æ–ø—è—Ç—å –≤—Å—ë —Å–ª–æ–º–∞–ª–æ—Å—å?

**–î–ê–¢–ê**: Oct 20, 2025  
**–ò–ù–¶–ò–î–ï–ù–¢**: MySQL crash, —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∞—è  
**–í–†–ï–ú–Ø –ù–ê –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï**: 10 —á–∞—Å–æ–≤  

---

## –ì–õ–ê–í–ù–´–ô –í–´–í–û–î

> **–ü—Ä–æ–±–ª–µ–º–∞ –Ω–µ –≤ –∫–æ–¥–µ. –ü—Ä–æ–±–ª–µ–º–∞ –≤ –ü–†–û–¶–ï–°–°–ï —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.**

–ë—ã–ª–∏ 3 –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –æ—à–∏–±–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞, –∫–æ—Ç–æ—Ä—ã–µ –≤ —Å—É–º–º–µ —Å–æ–∑–¥–∞–ª–∏ catastrophic failure:

1. **–ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –Ω–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω—ã** ‚Üí –°—Ç–æ–ª–±—Ü—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤—Ä—É—á–Ω—É—é ‚Üí –û—à–∏–±–∫–∏ –ø—Ä–∏ –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –¥–æ–±–∞–≤–ª–µ–Ω–∏—è—Ö
2. **–ü–ª–∞–Ω –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã** ‚Üí –ö–æ–¥ –ø–∏—Å–∞–ª—Å—è –ø–æ –ø–∞–º—è—Ç–∏ ‚Üí –§–∏—á–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–æ–≤–∏–Ω—á–∞—Ç–æ
3. **–ù–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º** ‚Üí Broken code –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ production ‚Üí Crash

---

## –û–®–ò–ë–ö–ê #1: Database Migrations Not Automated

### –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:

–í –ø–ª–∞–Ω–∞—Ö COLLECTION_PAGE_IMPLEMENTATION_PLAN.md –±—ã–ª–æ –Ω–∞–ø–∏—Å–∞–Ω–æ:

```markdown
## üîπ –°–õ–û–ô 3: Infrastructure Layer

#### 3.1. –û–±–Ω–æ–≤–∏—Ç—å MySQLPageRepository.php

–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ç–∏–ø—É –∏ —Å—Ç–∞—Ç—É—Å—É:
...
```

**–ù–æ –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏**:

1. –ö—Ç–æ-—Ç–æ –æ—Ç–∫—Ä—ã–ª MySQL Workbench
2. –ù–∞–ø–∏—Å–∞–ª –≤—Ä—É—á–Ω—É—é:
```sql
ALTER TABLE pages ADD COLUMN menu_title VARCHAR(255);
ALTER TABLE pages ADD COLUMN rendered_html LONGTEXT;
ALTER TABLE pages ADD COLUMN source_template_slug VARCHAR(255);
ALTER TABLE blocks ADD COLUMN client_id VARCHAR(36);
```
3. –ù–∞–∂–∞–ª Execute ‚Üí ‚úÖ –°—Ç–æ–ª–±—Ü—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã

**–ü—Ä–æ–±–ª–µ–º–∞**: –≠—Ç–æ –±—ã–ª–∞ –†–£–ß–ù–ê–Ø —Ä–∞–±–æ—Ç–∞, –±–µ–∑ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è!

### –ü–æ—á–µ–º—É —ç—Ç–æ –ø–ª–æ—Ö–æ:

#### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏
```
‚ùì –ö—Ç–æ –¥–æ–±–∞–≤–∏–ª —ç—Ç–∏ —Å—Ç–æ–ª–±—Ü—ã?
‚ùì –ö–æ–≥–¥–∞? (–∫–∞–∫–æ–π date?)
‚ùì –ó–∞—á–µ–º? (–¥–ª—è –∫–∞–∫–æ–π —Ñ–∏—á–∏?)
‚ùì –ö–∞–∫–æ–π –±—ã–ª –ø–æ—Ä—è–¥–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è?
‚Üí –ù–µ–ª—å–∑—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é, –Ω–µ–ª—å–∑—è –æ—Ç–∫–∞—Ç–∏—Ç—å
```

#### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ–ª—å–∑—è –æ—Ç–∫–∞—Ç–∏—Ç—å
```sql
-- –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:
-- –ö–∞–∫ –æ—Ç–∫–∞—Ç–∏—Ç—å?
-- ALTER TABLE pages DROP COLUMN menu_title;
-- –ù–æ —ç—Ç–æ –ª–æ–º–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏!

-- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –±—ã–ª–æ –±—ã:
-- CREATE MIGRATION 20251020_add_collection_columns.php
-- DOWN: DROP COLUMN menu_title;
```

#### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –≤ team
```
–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ê –¥–æ–±–∞–≤–∏–ª —Å—Ç–æ–ª–±—Ü—ã –≤ —Å–≤–æ–µ–π –ë–î (–ª–æ–∫–∞–ª—å–Ω–æ)
–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ë –¥–æ–±–∞–≤–∏–ª –∏—Ö –≤ –¥—Ä—É–≥–æ–º –ø–æ—Ä—è–¥–∫–µ

–ö–æ–≥–¥–∞ –æ–Ω–∏ —Å–º–µ—Ä–¥–∂–∞—Ç –∫–æ–¥ ‚Üí –ë–î —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç!
```

#### –ü—Ä–æ–±–ª–µ–º–∞ 4: Production –æ—Ç–∫–∞—Ç –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω
```
–ï—Å–ª–∏ —Ñ–∏—á–∞ —Å–ª–æ–º–∞–ª–∞ production:
- –ù–µ–ª—å–∑—è –æ—Ç–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (–Ω–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ process)
- –ù–µ–ª—å–∑—è –±—ã—Å—Ç—Ä–æ –≤–µ—Ä–Ω—É—Ç—å –∫ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏ –ë–î
- –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —É–¥–∞–ª—è—Ç—å —Å—Ç–æ–ª–±—Ü—ã
```

### –ì–¥–µ —ç—Ç–æ –≤–∑–æ—Ä–≤–∞–ª–æ—Å—å:

Oct 20 —É—Ç—Ä–æ, –ø–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É —Å—Ç—Ä–∞–Ω–∏—Ü—É:

```php
// CreatePage.php –ø—ã—Ç–∞–ª—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –Ω–æ–≤–æ–º—É —Å—Ç–æ–ª–±—Ü—É
$page = new Page(
    // ...
    sourceTemplateSlug: $data['source_template_slug'] ?? null,
    // –Ω–æ collectionConfig –±—ã–ª NULL
);

// –í –ë–î –Ω–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
// –ö–æ–≥–¥–∞ –ø–æ–ø—ã—Ç–∞–ª–∏—Å—å –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
// –í–µ—Ä–Ω—É–ª–æ—Å—å NULL
// Code –ª–æ–º–∞–µ—Ç—Å—è –Ω–∞:
// $config = $page->getCollectionConfig() ?? [];
```

**Cascade effect**:
```
1. –°—Ç–∞—Ä—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–º–µ–ª–∏ sourceTemplateSlug = NULL
2. Code –ø–∏—Å–∞–ª: "if (!$config) throw Error"
3. –í—Å–µ GET –∑–∞–ø—Ä–æ—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏ 500
4. MySQL –≤—ã–≥–ª—è–¥–µ–ª –∫–∞–∫ "crashed"
5. –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ: –ø—Ä–æ—Å—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –æ—à–∏–±–∫–∏
```

---

## –û–®–ò–ë–ö–ê #2: –ü–ª–∞–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

### –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:

**19 Oct 19:00**: GitHub Copilot –Ω–∞–ø–∏—Å–∞–ª:
- `COLLECTION_PAGE_IMPLEMENTATION_PLAN.md` (200+ —Å—Ç—Ä–æ–∫, –û–ß–ï–ù–¨ –ø–æ–¥—Ä–æ–±–Ω–æ)
- `COLLECTION_PAGE_ARCHITECTURE_DIAGRAM.md` (—Å –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏ –ø–æ—Ç–æ–∫–æ–≤)

**20 Oct 08:00**: –ö—Ç–æ-—Ç–æ –Ω–∞—á–∞–ª –∫–æ–¥–∏—Ç—å:
```
–í–º–µ—Å—Ç–æ:
  1. –ü—Ä–æ—á–∏—Ç–∞—Ç—å –ø–ª–∞–Ω
  2. –°–ª–µ–¥–æ–≤–∞—Ç—å —à–∞–≥–∞–º step-by-step
  3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å 100%

–ü—Ä–æ–∏–∑–æ—à–ª–æ:
  1. –ü–æ–º–Ω–∏—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —á—Ç–æ —Ç–∞–º –±—ã–ª–æ
  2. –ü–∏—Å–∞—Ç—å –∫–æ–¥ –ø–æ –ø–∞–º—è—Ç–∏
  3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å ~20% –æ—Ç —Ç–æ–≥–æ —á—Ç–æ –æ–ø–∏—Å–∞–Ω–æ
```

### –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ:

#### –¢–æ —á—Ç–æ –±—ã–ª–æ –í–°–ü —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ –ø–ª–∞–Ω—É:
```php
// COLLECTION_PAGE_IMPLEMENTATION_PLAN.md (Line 180-220)

class GetCollectionItems {
    public function execute(string $collectionPageId): array {
        // 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–æ–ª–ª–µ–∫—Ü–∏–∏
        // 2. –ü–æ–ª—É—á–∏—Ç—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω—É–∂–Ω—ã—Ö —Ç–∏–ø–æ–≤
        // 3. –ò—Å–∫–ª—é—á–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–∑ excludePages
        // 4. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
        // 5. –õ–∏–º–∏—Ç
        // 6. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏
        // 7. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Å–µ–∫—Ü–∏—è–º
    }
}

class UpdateCollectionCardImage {
    public function execute(string $collectionPageId, string $targetPageId, string $imageUrl): void {
        // 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–æ–ª–ª–µ–∫—Ü–∏–∏
        // 2. –û–±–Ω–æ–≤–∏—Ç—å collectionConfig.cardImages[targetPageId]
        // 3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
    }
}

class CollectionController {
    public function getItems(string $pageId): void { ... }
    public function updateCardImage(string $pageId): void { ... }
}
```

#### –ß—Ç–æ –†–ï–ê–õ–¨–ù–û –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
```php
// backend/src/Domain/Entity/Page.php
// ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–≤–æ–π—Å—Ç–≤–∞: $collectionConfig, $sourceTemplateSlug, $menuTitle
// ‚ùå –ù–æ –º–µ—Ç–æ–¥—ã getCollectionItems() –Ω–µ –±—ã–ª–æ!
// ‚ùå –ú–µ—Ç–æ–¥–æ–≤ —Å–±–æ—Ä–∫–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –Ω–µ –±—ã–ª–æ!

// backend/src/Application/UseCase/CreatePage.php
// ‚úÖ –ü–µ—Ä–µ–¥–∞–µ—Ç collectionConfig
// ‚ùå –ù–æ –Ω–µ –∑–∞–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è!

// backend/src/Presentation/Controller/PageController.php
// ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–Ω–∞ –≤ –æ—Ç–≤–µ—Ç
// ‚ùå –ù–æ –Ω–µ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏!

// COMPLETELY MISSING:
// ‚ùå GetCollectionItems.php (Use Case)
// ‚ùå UpdateCollectionCardImage.php (Use Case)
// ‚ùå CollectionController.php (Presentation)
// ‚ùå Frontend UI –≤ editor.js
```

### –ü–æ—á–µ–º—É —ç—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å:

**–ì–∏–ø–æ—Ç–µ–∑–∞ 1: –°–ø–µ—à–∫–∞**
> "–ü–ª–∞–Ω –±—ã–ª, –Ω–æ –Ω—É–∂–Ω–æ –±—ã–ª–æ –±—ã—Å—Ç—Ä–æ. –ù–∞–ø–∏—Å–∞–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–µ, –ø–æ—Ç–æ–º –¥–æ–¥–µ–ª–∞–µ–º."

**–ì–∏–ø–æ—Ç–µ–∑–∞ 2: –ù–µ–ø–æ–ª–Ω–æ—Ç–∞ –ø–ª–∞–Ω–∞**
> "–ü–ª–∞–Ω –±—ã–ª —Å–ª–∏—à–∫–æ–º –ø–æ–¥—Ä–æ–±–Ω—ã–π, –Ω–µ–∫—Ç–æ –ø—Ä–æ—á–∏—Ç–∞–ª —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª–æ"

**–ì–∏–ø–æ—Ç–µ–∑–∞ 3: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**
> "–û–¥–∏–Ω —á–µ–ª–æ–≤–µ–∫ –ø–∏—Å–∞–ª Entity, –¥—Ä—É–≥–æ–π Controller, –Ω–∏–∫—Ç–æ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å"

### –ì–¥–µ —ç—Ç–æ –≤–∑–æ—Ä–≤–∞–ª–æ—Å—å:

Oct 20 –ø–æ–ª–¥–µ–Ω—å, –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é:

```javascript
// frontend/editor.js –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é
const response = await apiClient.request(
    `/api/pages/${pageId}/collection-items`
);

// ‚ùå –≠–ù–î–ü–û–ò–ù–¢ –ù–ï –°–£–©–ï–°–¢–í–£–ï–¢! 404 error
```

**Cascade effect**:
```
1. Feature –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
2. Frontend –ª–æ–º–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
3. –ù–æ backend –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ "work fine" –Ω–∞ –ø–µ—Ä–≤—ã–π –≤–∑–≥–ª—è–¥
4. –°–∏—Å—Ç–µ–º–∞ —Ö—Ä—É–ø–∫–∞—è, –º–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
```

---

## –û–®–ò–ë–ö–ê #3: –ù–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:

**–ü—Ä–æ—Ü–µ—Å—Å –∫–æ—Ç–æ—Ä—ã–π –ë–´–õ:**
```
1. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø–∏—à–µ—Ç –∫–æ–¥ –ª–æ–∫–∞–ª—å–Ω–æ ‚úÖ
2. –ö–æ–ø–∏—Ä—É–µ—Ç –Ω–∞ XAMPP (production-like environment) ‚úÖ
3. –ö–ª–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫—É "–°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É" ‚ùå CRASH
4. MySQL –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É
5. –ù–∞—á–∞–ª–∏ —á–∏–Ω–∏—Ç—å —Å—Ä–æ—á–Ω–æ...
```

**–ü—Ä–æ—Ü–µ—Å—Å –∫–æ—Ç–æ—Ä—ã–π –î–û–õ–ñ–ï–ù –ë–´–õ –ë–´–¢–¨:**
```
1. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø–∏—à–µ—Ç –∫–æ–¥
2. –ü–ï–†–ï–î –¥–µ–ø–ª–æ–µ–º: –∑–∞–ø—É—Å—Ç–∏—Ç—å automated tests
   - Unit tests (CreatePage –∫–ª–∞—Å—Å)
   - Integration tests (–ë–î + API)
   - Smoke tests (–æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏)
3. –í–°–ï —Ç–µ—Å—Ç—ã –î–û–õ–ñ–ù–´ –ø—Ä–æ–π—Ç–∏ –∑–µ–ª–µ–Ω—ã–º
4. –¢–û–õ–¨–ö–û –ï–°–õ–ò –∑–µ–ª–µ–Ω—ã–π ‚Üí –¥–µ–ø–ª–æ–µ–º
```

### –ü–æ—á–µ–º—É —Ç–µ—Å—Ç—ã –ø–æ–º–æ–≥–ª–∏ –±—ã:

#### Test Case 1: CreatePage.php unit test
```php
public function testCreatePageWithCollectionConfig() {
    $data = [
        'title' => 'Test',
        'type' => 'collection',
        'collectionConfig' => [
            'sourceTypes' => ['article', 'guide']
        ]
    ];
    
    $page = $this->createPage->execute($data);
    
    // –û—à–∏–±–∫–∞ –±—ã–ª–∞ –±—ã –ø–æ–π–º–∞–Ω–∞ –¢–£–¢:
    $this->assertEquals('collection', $page->getType());
    $this->assertNotNull($page->getCollectionConfig());
    // ‚ùå FAIL: getCollectionConfig() –≤–µ—Ä–Ω—É–ª NULL
}
```

#### Test Case 2: Integration test
```php
public function testGetCollectionItemsEndpoint() {
    // Create test collection page
    $collection = $this->createPage->execute([
        'title' => '–í—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã',
        'type' => 'collection',
        'collectionConfig' => [...]
    ]);
    
    // Test endpoint
    $response = $this->apiClient->get(
        "/api/pages/{$collection->getId()}/collection-items"
    );
    
    // ‚ùå FAIL: Endpoint –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (404)
}
```

#### Test Case 3: Smoke test (critical path)
```bash
# scripts/smoke_test.sh
echo "Creating new page..."
curl -X POST http://localhost/api/pages \
    -H "Content-Type: application/json" \
    -d '{...page data...}'

# ‚ùå FAIL: 500 error
```

**–í—ã–≤–æ–¥**: –ï—Å–ª–∏ –±—ã –∑–∞–ø—É—Å—Ç–∏–ª–∏ –î–û –¥–µ–ø–ª–æ—è ‚Üí –æ—à–∏–±–∫–∏ –±—ã–ª–∏ –±—ã –ø–æ–π–º–µ–Ω—ã –≤ 5 –º–∏–Ω—É—Ç

### –ì–¥–µ —ç—Ç–æ –≤–∑–æ—Ä–≤–∞–ª–æ—Å—å:

Oct 20 06:00, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–ª —Ä–µ–¥–∞–∫—Ç–æ—Ä:

```
System Error: MySQL 500
Cause: Unknown
Status: Unclear
Timeline: Crashed but when?
Recovery: Manual, no automated rollback
```

**Cascade effect**:
```
1. No tests –∑–∞–ø—É—â–µ–Ω—ã –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
2. Broken code –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ production
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç error –≤–º–µ—Å—Ç–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
4. Team —Ç—Ä–∞—Ç–∏—Ç 10 —á–∞—Å–æ–≤ –Ω–∞ —Ä—É—á–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
```

---

## –ö–û–ú–ë–ò–ù–ò–†–û–í–ê–ù–ù–´–ô –≠–§–§–ï–ö–¢

–¢—Ä–∏ –æ—à–∏–±–∫–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏ –±—ã–ª–∏ –±—ã –Ω–µ —Ç–∞–∫ —Å—Ç—Ä–∞—à–Ω—ã:

```
–û—à–∏–±–∫–∞ 1 (No DB migrations):
  ‚Üí –°—Ç–æ–ª–±—Ü—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤—Ä—É—á–Ω—É—é
  ‚Üí –ù–æ —Å–∏—Å—Ç–µ–º–∞ –º–æ–≥–ª–∞ –±—ã –≤—ã–∂–∏—Ç—å, –µ—Å–ª–∏ –±—ã tests –±—ã–ª–∏

–û—à–∏–±–∫–∞ 2 (–ü–ª–∞–Ω –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è):
  ‚Üí –§–∏—á–∞ –ø–æ–ª–æ–≤–∏–Ω—á–∞—Ç–∞
  ‚Üí –ù–æ —Å–∏—Å—Ç–µ–º–∞ –º–æ–≥–ª–∞ –±—ã –∂–∏—Ç—å –≤ degraded mode, –µ—Å–ª–∏ –±—ã DB –±—ã–ª–∞ stable

–û—à–∏–±–∫–∞ 3 (–ù–µ—Ç —Ç–µ—Å—Ç–æ–≤):
  ‚Üí Broken code –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ production
  ‚Üí –ù–æ –æ—Ç–∫–∞—Ç –±—ã–ª –±—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º, –µ—Å–ª–∏ –±—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –±—ã–ª–∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω—ã
```

**–ù–æ –≤–º–µ—Å—Ç–µ**:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ù–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è    ‚îÇ
‚îÇ (–æ—à–∏–±–∫–∞ –Ω–µ –ø–æ–π–º–∞–Ω–∞) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Broken code –Ω–∞ prod ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ü–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å new columns:   ‚îÇ
‚îÇ - collectionConfig = NULL           ‚îÇ
‚îÇ - sourceTemplateSlug –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑.  ‚îÇ
‚îÇ - Code –ª–æ–º–∞–µ—Ç—Å—è                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –û—à–∏–±–∫–∏ –≤ 5+ –º–µ—Å—Ç–∞—Ö –∫–æ–¥–∞ ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ MySQL –≤—ã–≥–ª—è–¥–∏—Ç full ‚îÇ
‚îÇ MySQL crash?        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 10 —á–∞—Å–æ–≤ –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª.  ‚îÇ
‚îÇ Manual fixes everywhere  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## TIMELINE –ê–ù–ê–õ–ò–ó

```
Oct 19 19:00
Plan –Ω–∞–ø–∏—Å–∞–Ω (COLLECTION_PAGE_IMPLEMENTATION_PLAN.md)
‚úÖ –û—á–µ–Ω—å –ø–æ–¥—Ä–æ–±–Ω–æ (200+ —Å—Ç—Ä–æ–∫)
‚úÖ All use cases –æ–ø–∏—Å–∞–Ω—ã
‚úÖ All endpoints —Å–ø–µ—Ü–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã

Oct 19 20:00 - Oct 20 07:00
–ö–æ–¥–∏–Ω–≥ –ø–æ –ø–ª–∞–Ω—É?
‚ùå –ù–ï–¢! –¢–æ–ª—å–∫–æ –ë–î –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é

Oct 20 08:00
–ü–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É
‚ùå MySQL error

Oct 20 09:00 - Oct 20 16:00
–†—É—á–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ (10 —á–∞—Å–æ–≤)
- –ü—Ä–∞–≤–∫–∞ XSS rendering
- –ü—Ä–∞–≤–∫–∞ image URLs
- –ü—Ä–∞–≤–∫–∞ API response format
- –ü—Ä–∞–≤–∫–∞ Page constructor

Oct 20 17:00
–¢–û–õ–¨–ö–û –°–ï–ô–ß–ê–° –ø–æ–Ω—è–ª–∏ —á—Ç–æ –ø–ª–∞–Ω –±—ã–ª!
"–ù—É —ç—Ç–æ –Ω—É–∂–Ω–æ –±—ã–ª–æ –ø–æ –ø–ª–∞–Ω—É —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å..."
```

### –ü–æ—á–µ–º—É –Ω–µ –±—ã–ª–æ —Å–ª–µ–¥–æ–≤–∞–Ω–æ –ø–ª–∞–Ω—É?

**–í–µ—Ä—Å–∏—è 1: –°–ø–µ—à–∫–∞** (likely)
```
"–í –Ω–∞—Å deadline, Collection Pages –Ω—É–∂–Ω—ã —Å—Ä–æ—á–Ω–æ
–°–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É DB –∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è
–û—Å—Ç–∞–ª—å–Ω–æ–µ –¥–æ–¥–µ–ª–∞–µ–º –ø–æ—Ç–æ–º
–ü–æ—Ç–æ–º –Ω–µ –Ω–∞—Å—Ç—É–ø–∏–ª–æ, –∞ deadline –Ω–∞—Å—Ç—É–ø–∏–ª"
```

**–í–µ—Ä—Å–∏—è 2: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** (possible)
```
–ß–µ–ª–æ–≤–µ–∫ 1: "–Ø –¥–æ–±–∞–≤–ª—é —Å—Ç–æ–ª–±—Ü—ã –≤ –ë–î"
–ß–µ–ª–æ–≤–µ–∫ 2: "–Ø –æ–±–Ω–æ–≤–ª—é Entity"
–ù–∏–∫—Ç–æ: "–Ø –Ω–∞–ø–∏—à—É GetCollectionItems Use Case"
Result: Half-baked feature
```

**–í–µ—Ä—Å–∏—è 3: –ù–µ–ø–æ–ª–Ω–æ—Ç–∞ –ø–ª–∞–Ω** (unlikely)
```
–ü–ª–∞–Ω –±—ã–ª –û–ß–ï–ù–¨ –ø–æ–¥—Ä–æ–±–Ω—ã–π
–°–ª–æ–∂–Ω–æ –±—ã–ª–æ –Ω–µ –∑–∞–º–µ—Ç–∏—Ç—å
–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –ø—Ä–æ—Å—Ç–æ –Ω–µ –ø—Ä–æ—á–∏—Ç–∞–ª–∏ –∏–ª–∏ –ø—Ä–æ—á–∏—Ç–∞–ª–∏ –≤–ø–æ–ª–æ–≤–∏–Ω—É
```

---

## –¢–û–ü-5 –ü–†–ò–ß–ò–ù –ü–û–ß–ï–ú–£ –í–°–ï –°–õ–û–ú–ê–õ–û–°–¨

### ü•á #1: Database migrations –Ω–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
```
SCORE: 40/100
IMPACT: –°—Ç–æ–ª–±—Ü—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤—Ä—É—á–Ω—É—é, –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
FIX: –í–Ω–µ–¥—Ä–∏—Ç—å Laravel migrations –∏–ª–∏ custom migration system
```

### ü•à #2: –ü–ª–∞–Ω –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã
```
SCORE: 30/100
IMPACT: Feature —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–æ–≤–∏–Ω—á–∞—Ç–æ, inconsistent implementation
FIX: Code review –ø—Ä–æ—Ü–µ—Å—Å, –ø–µ—Ä–µ–¥ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º –∫–æ–¥–∞ ‚Äî –ø—Ä–æ—á–∏—Ç–∞—Ç—å –ø–ª–∞–Ω
```

### ü•â #3: –ù–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
```
SCORE: 20/100
IMPACT: Broken code –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ production, crash –Ω–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω
FIX: CI/CD pipeline, automated tests (unit + integration + smoke)
```

### 4Ô∏è‚É£ #4: API responses –Ω–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω—ã
```
SCORE: 5/100
IMPACT: –°–º–µ—à–∏–≤–∞–Ω–∏–µ camelCase –∏ snake_case, frontend –ª–æ–º–∞–µ—Ç—Å—è
FIX: API versioning, strict response format spec
```

### 5Ô∏è‚É£ #5: –ù–µ—Ç feature flags –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–∏—á
```
SCORE: 5/100
IMPACT: –ù–µ–ª—å–∑—è –æ—Ç–∫–∞—Ç–∏—Ç—å, –Ω–µ–ª—å–∑—è –¥–µ–ø–ª–æ–∏—Ç—å –ø–æ—ç—Ç–∞–ø–Ω–æ
FIX: Feature flag —Å–∏—Å—Ç–µ–º–∞, enable/disable –±–µ–∑ –∫–æ–¥–∞
```

---

## PRESCRIPTIVE RECOMMENDATIONS

### ‚úÖ –ö–ê–ö –≠–¢–û–ì–û –ò–ó–ë–ï–ñ–ê–¢–¨ –í –ë–£–î–£–©–ï–ú

#### 1. Database Migrations Framework

**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –≤–Ω–µ–¥—Ä–∏—Ç—å:**

```php
// backend/database/migrations/2025_10_20_AddCollectionColumns.php

class AddCollectionColumns implements Migration {
    public function up() {
        Schema::table('pages', function(Blueprint $table) {
            $table->string('menu_title')->nullable();
            $table->longText('rendered_html')->nullable();
            $table->string('source_template_slug')->nullable();
        });
    }
    
    public function down() {
        Schema::table('pages', function(Blueprint $table) {
            $table->dropColumn('menu_title');
            $table->dropColumn('rendered_html');
            $table->dropColumn('source_template_slug');
        });
    }
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ Easy rollback
- ‚úÖ Team synchronization

#### 2. Code Review Before Commit

**–ü–†–û–¶–ï–°–°:**
```
1. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø–∏—à–µ—Ç –∫–æ–¥
2. –î–û –ö–û–ú–ú–ò–¢–ê:
   - –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –ø–ª–∞–Ω/—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é
   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
   - –ù–∞–ø–∏—Å–∞—Ç—å unit tests
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å smoke tests
3. –ö–æ–º–º–∏—Ç + Pull Request
4. CODE REVIEW:
   - Reviewer —á–∏—Ç–∞–µ—Ç –ø–ª–∞–Ω
   - Reviewer –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –∫–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–ª–∞–Ω—É
   - Reviewer –ø—Ä–æ–≤–µ—Ä—è–µ—Ç tests
5. MERGE —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—Å–µ –∑–µ–ª–µ–Ω–æ
6. CI/CD pipeline –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç
```

#### 3. Mandatory Automated Testing

**BEFORE DEPLOYMENT:**
```bash
# Unit tests
./vendor/bin/phpunit tests/Unit/Application/UseCase/CreatePageTest.php

# Integration tests
./vendor/bin/phpunit tests/Integration/

# Smoke tests
bash scripts/smoke_test.sh

# ALL must pass ‚úÖ before deploy
```

#### 4. Feature Flags –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–∏—á

```php
// config/features.php
return [
    'collection_pages_read' => env('ENABLE_COLLECTION_READ', false),
    'collection_pages_edit' => env('ENABLE_COLLECTION_EDIT', false),
];

// –í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ:
if (!config('features.collection_pages_read')) {
    return $this->renderOldPageDisplay();  // Fallback
}

// New logic
return $this->renderCollectionPage();
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ Easy rollback (just toggle flag)
- ‚úÖ Staged rollout (10% users ‚Üí 50% ‚Üí 100%)
- ‚úÖ Canary deployment
- ‚úÖ Emergency kill switch

#### 5. API Versioning

```php
// backend/public/index.php
$version = 1;  // API v1

if (preg_match('/\/api\/v(\d+)/', $_SERVER['REQUEST_URI'], $matches)) {
    $version = (int)$matches[1];
}

// Route to appropriate controller
if ($version === 1) {
    // Use V1 controllers
} else if ($version === 2) {
    // Use V2 controllers (with new fields)
}
```

**–ü—Ä–∏–º–µ—Ä—ã:**
```
GET /api/v1/pages/:id ‚Üí Old format (snake_case)
GET /api/v2/pages/:id ‚Üí New format (camelCase)

Frontend –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å v1 –ø–æ–∫–∞ –Ω–µ –≥–æ—Ç–æ–≤ –Ω–∞ v2
```

---

## –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

### –ì–ª–∞–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –∫—Ä–∞—à–∞:

> **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ –ü–†–û–¶–ï–°–°–ê, –Ω–µ –∫–æ–¥–∞**

–ö–æ–¥ –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å —Ö–æ—Ä–æ—à–æ –∏–ª–∏ –ø–ª–æ—Ö–æ.  
–ù–æ –µ—Å–ª–∏ –Ω–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –∫–∞—á–µ—Å—Ç–≤–∞, —Ç–æ –¥–∞–∂–µ —Ö–æ—Ä–æ—à–∏–π –∫–æ–¥ –Ω–µ —Å–ø–∞—Å–µ—Ç.

### –¢—Ä–∏ —Å—Ç–æ–ª–ø–∞ –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏–ª–∏ –±—ã –∫—Ä–∞—à:

1. **üóÑÔ∏è DB Migrations** ‚Äî Versioned, reversible, trackable
2. **üìã Plan-Driven Development** ‚Äî –ü–ª–∞–Ω –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã, –Ω–µ guideline
3. **‚úÖ Mandatory Testing** ‚Äî No code to production –±–µ–∑ passing tests

### Next steps:

```
–°–µ–≥–æ–¥–Ω—è:
- –ó–∞–∫–æ–Ω—á–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é Collection Pages –ø–æ –ø–ª–∞–Ω—É
- –î–æ–±–∞–≤–∏—Ç—å GetCollectionItems Use Case
- –î–æ–±–∞–≤–∏—Ç—å UpdateCollectionCardImage Use Case

–ù–∞ –Ω–µ–¥–µ–ª—é:
- –í–Ω–µ–¥—Ä–∏—Ç—å DB –º–∏–≥—Ä–∞—Ü–∏–∏
- –î–æ–±–∞–≤–∏—Ç—å API versioning
- –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã

–ù–∞ –º–µ—Å—è—Ü:
- CI/CD pipeline
- Feature flags
- Code review process
```

---

**WRITTEN**: Oct 20, 2025, 18:00 UTC+2  
**INCIDENT SEVERITY**: Critical  
**TIMELINE TO RESOLUTION**: 10 hours manual recovery  
**TIMELINE TO PREVENTION**: 2-3 days to implement automation  

**KEY MESSAGE**:  
> –•–æ—Ä–æ—à–∏–π –∫–æ–¥ + —Ö–æ—Ä–æ—à–∏–π –ø—Ä–æ—Ü–µ—Å—Å = —Ö–æ—Ä–æ—à–∏–π –ø—Ä–æ–¥—É–∫—Ç  
> –•–æ—Ä–æ—à–∏–π –∫–æ–¥ + –ø–ª–æ—Ö–æ–π –ø—Ä–æ—Ü–µ—Å—Å = bad product —Å–æ —Å–∫—Ä—ã—Ç—ã–º–∏ –±–æ–º–±–∞–º–∏
