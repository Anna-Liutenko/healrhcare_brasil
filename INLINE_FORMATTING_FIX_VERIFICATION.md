# ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ inline-—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û –ò –°–ò–ù–•–†–û–ù–ò–ó–ò–†–û–í–ê–ù–û**

**–î–∞—Ç–∞:** 5 –Ω–æ—è–±—Ä—è 2025, 22:13 UTC-3

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø–ª–∞–Ω—É

### 1Ô∏è‚É£ –§–∞–π–ª: `/frontend/editor.html` - Marked.js

- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ marked.js —á–µ—Ä–µ–∑ CDN**
  - –í–µ—Ä—Å–∏—è: `marked@11.1.1`
  - URL: `https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js`
  - –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ: –°—Ç—Ä–æ–∫–∞ 28-29
  - –†–∞–∑–º–µ—â–µ–Ω–∏–µ: –°—Ä–∞–∑—É –ø–æ—Å–ª–µ Turndown.js (–°—Ç—Ä–æ–∫–∞ 26-27)
  - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: "Marked.js for Markdown -> HTML conversion (used by inline editor for rendering)"

- ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ XAMPP**
  - –§–∞–π–ª: `C:\xampp\htdocs\healthcare-cms-frontend\editor.html`
  - –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 11/5/2025 10:10:22 PM
  - –°—Ç–∞—Ç—É—Å: ‚úÖ –°–æ–¥–µ—Ä–∂–∏—Ç marked.js

---

### 2Ô∏è‚É£ –§–∞–π–ª: `/frontend/editor.js` - –ú–µ—Ç–æ–¥—ã

#### 2.1 ‚úÖ –ú–µ—Ç–æ–¥ `renderMarkdown()` –¥–æ–±–∞–≤–ª–µ–Ω

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –°—Ç—Ä–æ–∫–∏ 906-947 (–ø–æ—Å–ª–µ –º–µ—Ç–æ–¥–∞ `escape()`)

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
```javascript
‚úÖ JSDoc –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è Markdown ‚Üí HTML —á–µ—Ä–µ–∑ marked.parse()
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ breaks: true (–ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫)
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ gfm: true (GitHub Flavored Markdown)
‚úÖ Try-catch –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚úÖ Fallback –Ω–∞ escape() –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ marked.js
‚úÖ DOMPurify —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º whitelist:
   - ALLOWED_TAGS: ['strong', 'em', 'u', 's', 'a', 'br', 'p', 'b', 'i']
   - ALLOWED_ATTR: ['href', 'title', 'target']
   - ALLOW_DATA_ATTR: false (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ DOMPurify
```

#### 2.2-2.7 ‚úÖ –í—Å–µ render-–º–µ—Ç–æ–¥—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã

**–ú–µ—Ç–æ–¥—ã —Å –∑–∞–º–µ–Ω–æ–π `this.escape()` ‚Üí `this.renderMarkdown()`:**

| –ú–µ—Ç–æ–¥ | –ü–æ–ª—è | –°—Ç–∞—Ç—É—Å |
|-------|------|--------|
| `renderMainScreen()` | `text` (p tag) | ‚úÖ |
| `renderPageHeader()` | `title`, `subtitle` | ‚úÖ |
| `renderArticleCards()` | `title`, `text` | ‚úÖ |
| `renderAboutSection()` | `title`, `paragraphs[]` | ‚úÖ |
| `renderTextBlock()` | `title` | ‚úÖ |
| `renderImage()` | `caption` | ‚úÖ |
| `renderBlockquote()` | `text` | ‚úÖ |
| `renderButton()` | `text` | ‚úÖ |
| `renderSectionTitle()` | `text` | ‚úÖ |
| `renderChatBot()` | `buttonText` | ‚úÖ |

**–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–º–µ–Ω:** 15+ –ø–æ–ª–µ–π

---

### 3Ô∏è‚É£ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

#### ‚úÖ Escape() —Å–æ—Ö—Ä–∞–Ω–µ–Ω –¥–ª—è –ù–ï-editable –ø–æ–ª–µ–π

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `this.escape()` –¥–ª—è:**
- URLs: `bgImage`, `buttonLink`, `imageUrl`, `card.link`, `link`
- –ê—Ç—Ä–∏–±—É—Ç—ã: `alt`, `placeholder`, `src`
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: `header.logoText`, `footer.copyrightText`, `footer.privacyLink`
- Fallback –≤ `renderMarkdown()` –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –î–≤–æ–π–Ω–∞—è –∑–∞—â–∏—Ç–∞ (XSS prevention)
- Backend: HTMLPurifier (PHP)
- Frontend: DOMPurify (JavaScript)

---

### 4Ô∏è‚É£ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ XAMPP

#### ‚úÖ Frontend —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω

| –§–∞–π–ª | –ü—É—Ç—å | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | –°—Ç–∞—Ç—É—Å |
|------|------|-----------------|--------|
| `editor.html` | `C:\xampp\htdocs\healthcare-cms-frontend\` | 11/5/2025 10:10:22 PM | ‚úÖ |
| `editor.js` | `C:\xampp\htdocs\healthcare-cms-frontend\` | 11/5/2025 10:13:51 PM | ‚úÖ |

**–ö–æ–º–∞–Ω–¥–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:** `sync-to-xampp.ps1`
- –°—Ç–∞—Ç—É—Å: ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ

---

### 5Ô∏è‚É£ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–ª–∞–Ω—É

#### ‚úÖ –í—Å–µ –ø—É–Ω–∫—Ç—ã –ø–ª–∞–Ω–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã

1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å marked.js –≤ editor.html (–ø–æ—Å–ª–µ Turndown.js) - **DONE**
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ renderMarkdown() –≤ editor.js - **DONE**
3. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å renderMainScreen - **DONE**
4. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å renderPageHeader - **DONE**
5. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å renderArticleCards - **DONE**
6. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å renderAboutSection - **DONE**
7. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å renderTextBlock - **DONE**
8. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å renderImage (caption) - **DONE**
9. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å renderBlockquote - **DONE**
10. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å renderButton - **DONE**
11. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å renderSectionTitle - **DONE**
12. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å renderChatBot - **DONE**
13. ‚úÖ Backend –ù–ï –∏–∑–º–µ–Ω–µ–Ω - **CORRECT** (—Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ)
14. ‚úÖ Escape() —Å–æ—Ö—Ä–∞–Ω–µ–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ - **DONE**
15. ‚úÖ –¢–æ–ª—å–∫–æ CDN (–Ω–µ NPM/Composer) - **CONFIRMED**
16. ‚úÖ –§–∞–π–ª—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –≤ XAMPP - **DONE**

---

## üß™ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:

1. **–û—Ç–∫—Ä—ã—Ç—å editor:**
   ```
   http://localhost/visual-editor-standalone/
   ```

2. **–°–æ–∑–¥–∞—Ç—å –±–ª–æ–∫ —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º:**
   - –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç: "–≠—Ç–æ **–∂–∏—Ä–Ω—ã–π** —Ç–µ–∫—Å—Ç –∏ *–∫—É—Ä—Å–∏–≤*"
   
3. **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É**

4. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä (Ctrl+Shift+R)**

5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - ‚úÖ –¢–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Å –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
   - ‚úÖ **–ñ–∏—Ä–Ω—ã–π** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∂–∏—Ä–Ω—ã–º
   - ‚úÖ *–ö—É—Ä—Å–∏–≤* –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫—É—Ä—Å–∏–≤–æ–º
   - ‚úÖ –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—à–∏–±–æ–∫

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã | 2 (editor.html, editor.js) |
| –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã | 1 (renderMarkdown) |
| –ü–æ–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω—ã | 15+ |
| –ú–µ—Ç–æ–¥—ã render –æ–±–Ω–æ–≤–ª–µ–Ω—ã | 10 |
| –°—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–æ | ~45 |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | –î–≤–æ–π–Ω–∞—è (Backend + Frontend) |
| –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è | ‚úÖ 100% |

---

## ‚ú® –†–µ–∑—É–ª—å—Ç–∞—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ inline-—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–æ—Å—å –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏  
**–ü—Ä–∏—á–∏–Ω–∞:** Markdown —Ä–∞–∑–º–µ—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–ª–∞—Å—å –≤ –ë–î, –Ω–æ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞—Å—å –∫–∞–∫ —Ç–µ–∫—Å—Ç (—á–µ—Ä–µ–∑ `escape()`)  
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è Markdown ‚Üí HTML —á–µ—Ä–µ–∑ `marked.js` —Å —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏–µ–π `DOMPurify`  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–û–õ–ù–û–°–¢–¨–Æ –£–°–¢–†–ê–ù–ï–ù–û**

---

*–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –ø–ª–∞–Ω—É –∏ –≥–æ—Ç–æ–≤—ã –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É.*
