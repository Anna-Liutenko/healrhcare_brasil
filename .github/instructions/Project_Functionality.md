Что должен делать проект
========================

Проект представляет собой сайт с блогом на публичной стороне с возможностью управлять контентом сайта, имея доступ в админ-панель.

Админ-панель
------------

Войти в админ-панель можно только по соответствующему логину и паролю, причём авторизация должна всегда проверяться (проверять существует ли токен авторизации), если пользователь пытается внести хоть какие-то исправления. Супер-админ может назначать других администраторов. Для этого нужно создать учётную запись, обозначить имя и email нового администратора, а также выдать пароль. Только супер-админ может менять пароли у себя и других администраторов, добавлять учётные записи новых админов и удалять учётные записи существующих админов. Удалить и изменить учётные данные супер-админа не может никто, кроме супер-админа.

Состоит из:

1.       Раздел со списком всех созданных страниц. В этом разделе:  
— Пользователь видит все страницы, созданные им в визуальном редакторе.

— Пользователь видит статус страниц (опубликовано/черновик).

— Пользователь может видеть, показывается ли страница в главном меню в шапке публичного сайта.

— Пользователь может простматривать то, как будет рендерится та или иная страница на публичном сайте.

— Пользователь может удалять страницы в корзину.

— Пользователь может удалять страницы из корзины.

— Пользователь может восстанавливать страницы из корзины, если со дня удаления прошло не более 30 дней.

— Пользователь может перейти на конкретную страницу и отредактировать её в визуальном редакторе, кликнув на кнопку «Редактировать» рядом с соответствующей страницей.

— Пользователь может создать новую страницу, кликнув на кнопку «Создать страницу» (после клика он переходит в визуальный редактор).

— Пользователь может настроить SEO\-параметры, которые относятся ко всему сайту (глобальные SEO\-настройки).  
  

2.       Визуальный редактор. В этом разделе:  
— Есть три вертикальные панели, в которых можно создавать новые страницы для публичного сайта или редактировать уже созданные страницы:

a.       Левая панель:

·       кнопки-блоки, которые позволяют перетаскивать определённые блоки в среднюю панель, где происходит редактирование. У каждой кнопки есть иконка в виде глаза, по клику на которую можно посмотреть превью блока.

·       кнопка с доступом к полным шаблонам страниц. По клику на кнопку открывается список шаблонов

·       все блоки и шаблоны свёрстаны на основе файла "C:\\Users\\annal\\Documents\\Мои сайты\\Сайт о здравоохранении в Бразилии\\Разработка сайта с CMS\\prototypes\\Prototype. Healthcare in Brazil.html"

b.       Средняя панель: здесь отображаются все блоки, которые были выбраны в левой панели.

·       После того, как блок отобразился в средней панели, пользователь может изменить его положение на странице (сделать выше или ниже).

·       В визуальном редакторе пользователь может менять текст и картинки в инлайн-режиме.

·       Редактирование в инлайн-режиме даёт возможность пользователю: сделать текст жирным/курсивом/подчёркнутым/перечёркнутым/вставить ссылку/сбросить предыдущее форматирование.

·       В средней панели есть возможность менять высоту и отступы в блоках «Текстовый блок»/ «Вставить картинку»/ «Разделитель»/ «Отступ» (пустое пространство).  
  

c.       Правая панель: здесь отображаются настройки, необходимы для каждой страницы.

Основные SEO-настройки страниц.

Уникальный slug (пользователь вводит название страницы на кириллице или латинице, с применением цифр или без цифр — > название транслитерируется латиницей/цифрами и места пробелов заменяются знаком «-»).  
Смена картинок и иконок с помощью функции вставить URL на картинку или по клику на иконку папки загрузить картинку с устройства (в этом случае картинка сохраняется в медиатеке).

Настройка «Отображать в меню» (когда эта галка выставлена, URL на данную страницу будет отображаться на публичном сайте, с заголовком, который укажет пользователь, и в том месте, которое укажет пользователь в соответствующей настройке.

Настройка «Типы страниц». В этой настройке тип 'Гайд' и 'Статья' имеют особые свойства: Если пользователь в выпадающем списке "Тип страницы" выбирает "Гайд" или "Статья", в правой панели (под основными настройками SEO) должно появляться дополнительное поле "Картинка-превью". Это поле позволяет пользователю загрузить изображение, которое будет использоваться для этой статьи/гайда на страницах-коллекциях.  
  

d.       Верхняя панель: здесь отображаются кнопки «Медиатека», «Создать статью», «Сохранить», «Опубликовать», «Скачать HTML», «Предпросмотр», «Сохранить и выйти».

·       **Медиатека** — по клике на эту кнопку пользователь может перейти в хранилище медиафайлов (картинок), где он может удалять и добавлять изображения.

·       **Создать статью** — по клику на эту кнопку пользователь переходит в Quill\-редактор, где он может вставлять тексты, форматировать их и вставлять картинки. Важное для Quill\-редактора: в Quill\-редакторе пользователь может менять размер картинки и менять выравнивание картинки в тексте с помощью drag\-n\-drop; при оформлении текста в виде «цитаты» весь массив выделенного для такого оформления текста должен отображаться на одной подложке, с непрерывными графическими элементами для вида форматирования «цитата», даже если фрагмент выделенного текста содержит несколько абзацев; по завершению создания статьи, пользователь нажимает в Quill\-редаторе «Сохранить и выйти», при этом статья сохраняется именно в том виде, в котором пользователь её видел в Quill\-редакторе, и именно в таком виде отображается в среднем поле визуального редактора, куда пользователь попадает по кнопке «Сохранить и выйти». Статья становится одним из блоков создаваемой страницы.

·       **Сохранить** — по клику на эту кнопку сохраняются все изменения в визуальном редакторе, которые сделал пользователь. Кроме того, для безопасности, нужно делать сохранение всех изменений, которые ввёл пользователь, каждый 10 секунд.

·       **Опубликовать** — клик по этой кнопке означает, что все изменения, которые внёс пользователь, теперь будут опубликованы на публичном сайте, то есть страница публичного сайта будет рендерится именно в таком виде, в котором пользователь создал её в визуальном редакторе, именно с тем slug, который ввёл пользователь. Важно! Для страниц, которые были опубликованы на публичном сайте хотя бы один раз, нельзя поменять slug, но всё остальное менять можно.

·       **Скачать HTML** — по клику на эту кнопку, рендерится страница, которую пользователь создал в среднем поле визуального редактора, именно так, как пользователь её создал, после того, как страница срендерится, она скачивается на компьютер пользователя в виде статичного HTML.

·       **Предпросмотр** — по клику на эту страницу, пользователь в режиме просмотра может увидеть, как будет рендерится его страница на публичном сайте, но при этом на его устройство не загружается файл со статичным HTML, мы просто показываем пользователю конечный результат, не выходя из визуального редактора.

·       **Сохранить и выйти** — по клику на эту кнопку, все изменения, который пользователь внёс в визуальном редакторе, сохраняются, и пользователь попадает в раздел со списком всех страниц.

**Важно!** После того, как пользователь сохранил исправления на существующей странице или новую страницу, создаётся статичный HTML\-файл, который, после публикации страницы будет использоваться для рендеринга этой страницы c соответствующим slug и URL.

В средней панели визуального редактора всегда отображается шапка и футер страницы, которые остаются неизменными для каждой страницы. Глобальные настройки для футера и шапки меняются в разделе со списком страниц. Отображение меню в шапке зависит от того, какие страницы были выбраны для отображения в меню пользователем при настройке опубликованной страницы.

Публичный сайт
--------------

1.       Домен для публичного сайта настраивается после деплоя проекта на сервер. URL всех страниц образуется по следующему принципу:  domain.com.br/slug, где slug — часть, которая была задана при создании и публикации страницы пользователем в визуальном редакторе.

2.       Каждая страница рендерится из статичного HTML, который сохраняется в базу данных после того, как пользователь отредактировал эту страницу в визуальном редакторе.

3.       Изменения глобальных SEO\-настроек в разделе списка страниц должно влиять на рендеринг всех страниц, созданных в визуальном редакторе, то есть глобальные SEO\-настройки и их изменения, внесённые в разделе списка страниц необходимо применять ко всем созданным пользователем страницам (опубликованным или неопубликованным).

4.       При работе с админ-панелью сайта и с рендерингом публичных страниц необходимо строго соблюдать инструкции из этого файла: C:\\Users\\annal\\Documents\\Мои сайты\\Сайт о здравоохранении в Бразилии\\Разработка сайта с CMS\\.github\\instructions

5.       Рендеринг Страниц-Коллекций (Автоматический): cтраницы-коллекции **не создаются вручную в визуальном редакторе**. Это "индексные" страницы, которые автоматически собирают и отображают список всех страниц с типом "Статья" или "Гайд".

Каждая статья/гайд на такой странице отображается в виде карточки. Эта карточка должна содержать:

·       Картинку-превью (которую пользователь загрузил в настройках этой страницы).

·       Заголовок (из SEO\-настроек страницы).

·       Сниппет (короткий текст, взятый из поля "SEO\-описание" этой страницы).

·       Ссылку ("Читать дальше"), которая ведет на URL этой страницы (т.е. на ее \`slug\`).