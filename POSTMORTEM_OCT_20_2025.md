# üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ò–ù–¶–ò–î–ï–ù–¢: –æ–∫—Ç—è–±—Ä—å 20, 2025

## –•–†–û–ù–û–õ–û–ì–ò–Ø –°–û–ë–´–¢–ò–Ø

### –≠–¢–ê–ü 1: –ü–ê–î–ï–ù–ò–ï –°–ò–°–¢–ï–ú–´ (Oct 19-20)
- **–í—Ä–µ–º—è**: Oct 19 –Ω–æ—á—å + Oct 20 —Å —É—Ç—Ä–∞
- **–ü—Ä–æ–±–ª–µ–º–∞**: MySQL –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–ø–∞–ª –ø–æ—Å–ª–µ –ø–æ–ø—ã—Ç–∫–∏ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ñ–∏—á—É "Collection Pages"
- **–°–∏–º–ø—Ç–æ–º**: –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏ –æ—à–∏–±–∫—É
- **–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î

### –≠–¢–ê–ü 2: –û–ë–ù–ê–†–£–ñ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

#### –ü—Ä–æ–±–ª–µ–º–∞ #1: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–æ–ª–±—Ü—ã –≤ —Ç–∞–±–ª–∏—Ü–µ `pages`
–ö–æ–¥ –æ–∂–∏–¥–∞–ª:
- `menu_title` (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ –∏–∑ `menu_label`)
- `rendered_html` (–Ω–æ–≤—ã–π, –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è)
- `source_template_slug` (–Ω–æ–≤—ã–π, –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–π)

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏–ª–∏ 3 —Å—Ç–æ–ª–±—Ü–∞ —á–µ—Ä–µ–∑ ALTER TABLE

#### –ü—Ä–æ–±–ª–µ–º–∞ #2: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π —Å—Ç–æ–ª–±–µ—Ü –≤ —Ç–∞–±–ª–∏—Ü–µ `blocks`
–ö–æ–¥ –æ–∂–∏–¥–∞–ª:
- `client_id` (–¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å frontend)

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏–ª–∏ —Å—Ç–æ–ª–±–µ—Ü —á–µ—Ä–µ–∑ ALTER TABLE

#### –ü—Ä–æ–±–ª–µ–º–∞ #3: XSS Security vs Article Rendering (Oct 18 Follow-up)
- **–ü—Ä–∏—á–∏–Ω–∞**: Phase 2 XSS fix –¥–æ–±–∞–≤–∏–ª `this.escape()` –∫–æ—Ç–æ—Ä—ã–π –í–°–ï–ì–î–ê —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–ª –∫–æ–Ω—Ç–µ–Ω—Ç
- **–≠—Ñ—Ñ–µ–∫—Ç**: –°—Ç–∞—Ç—å–∏ —Ä–µ–Ω–¥–µ—Ä–∏–ª–∏—Å—å –∫–∞–∫ RAW HTML –≤–º–µ—Å—Ç–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- **–†–µ—à–µ–Ω–∏–µ**: –°–¥–µ–ª–∞–ª `renderTextBlock()` —É—Å–ª–æ–≤–Ω—ã–º - –µ—Å–ª–∏ `containerStyle='article'`, —Ç–æ —Ä–µ–Ω–¥–µ—Ä HTML, –∏–Ω–∞—á–µ escape

#### –ü—Ä–æ–±–ª–µ–º–∞ #4: –ö–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –Ω–∞ –ø—É–±–ª–∏—á–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö
- **–ü—Ä–∏—á–∏–Ω–∞**: `fixUploadsUrls()` –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª –ø–æ–ª–Ω—ã–µ URLs –≤–∏–¥–∞ `http://localhost/...`
- **–≠—Ñ—Ñ–µ–∫—Ç**: –ö–∞—Ä—Ç–∏–Ω–∫–∏ –∏–º–µ–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏
- **–†–µ—à–µ–Ω–∏–µ**: –û–±–Ω–æ–≤–∏–ª–∏ regex —á—Ç–æ–±—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª dev URLs

#### –ü—Ä–æ–±–ª–µ–º–∞ #5: –ö–Ω–æ–ø–∫–∞ –∫—É–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–ü—Ä–∏—á–∏–Ω–∞**: CSP –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª inline —Å–∫—Ä–∏–ø—Ç—ã –∏–∑ `rendered_html`
- **–ü–æ–ø—ã—Ç–∫–∞ —Ä–µ—à–µ–Ω–∏—è**: –î–æ–±–∞–≤–∏–ª–∏ nonce injection, –Ω–æ —ç—Ç–æ —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω–æ
- **–ò—Ç–æ–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ–∫–ª—é—á–∏–ª–∏—Å—å –Ω–∞ `'unsafe-inline'` –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã (–≤—Ä–µ–º–µ–Ω–Ω–æ–µ)

#### –ü—Ä–æ–±–ª–µ–º–∞ #6: PageId —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `undefined` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- **–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É backend (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç camelCase `pageId`) –∏ frontend (–æ–∂–∏–¥–∞–ª snake_case `page_id`)
- **–†–µ—à–µ–Ω–∏–µ**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –Ω–∞ camelCase –≤–µ–∑–¥–µ

#### –ü—Ä–æ–±–ª–µ–º–∞ #7: Unknown named parameter `$sourceTemplateSlug`
- **–ü—Ä–∏—á–∏–Ω–∞**: –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä Page.php –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–ª –Ω–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
- **–†–µ—à–µ–Ω–∏–µ**: –û–±–Ω–æ–≤–∏–ª–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å promoted properties –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π

### –≠–¢–ê–ü 3: –†–ï–®–ï–ù–ò–Ø –ü–†–ò–ú–ï–ù–ï–ù–ù–´–ï

#### backend/src/Application/UseCase/CreatePage.php
```php
// –î–û–ë–ê–í–ò–õ–ò: –ø–µ—Ä–µ–¥–∞—á–∞ renderedHtml –∏ sourceTemplateSlug
$page = new Page(
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è ...
    renderedHtml: $data['rendered_html'] ?? $data['renderedHtml'] ?? null,
    sourceTemplateSlug: $data['source_template_slug'] ?? $data['sourceTemplateSlug'] ?? null
);
```

#### backend/src/Domain/Entity/Page.php
```php
// –û–ë–ù–û–í–ò–õ–ò: –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å promoted properties
public function __construct(
    // ... 19 –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ ...
    private ?string $renderedHtml = null,
    private ?string $menuTitle = null,
    private ?string $sourceTemplateSlug = null
) { }
```

#### backend/src/Presentation/Controller/PageController.php
```php
// –ò–°–ü–†–ê–í–ò–õ–ò: –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–æ–ª—å–∫–æ camelCase
$result = [
    'success' => true,
    'pageId' => $response->pageId
];
```

#### backend/src/Presentation/Controller/PublicPageController.php
```php
// –û–ë–ù–û–í–ò–õ–ò fixUploadsUrls() –æ–±—Ä–∞–±–æ—Ç–∫—É dev URLs
$html = preg_replace_callback(
    "/(src=\'|src=\"|href=\'|href=\")http:\/\/localhost\/healthcare-cms-backend\/public(\/uploads\/[^\"']+)/i",
    function($m) use ($publicPrefix) {
        return $m[1] . $publicPrefix . $m[2];
    },
    $html
);

// –£–ü–†–û–°–¢–ò–õ–ò CSP –¥–ª—è tested 'unsafe-inline'
header("Content-Security-Policy: default-src 'self'; script-src 'self' 'unsafe-inline' ...");
```

#### frontend/editor.js
```javascript
// –ò–°–ü–†–ê–í–ò–õ–ò: –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ camelCase
this.currentPageId = response.pageId;

// –£–°–õ–û–í–ù–´–ô —Ä–µ–Ω–¥–µ—Ä –≤ renderTextBlock()
const safeContent = containerStyle === 'article' ? content : this.escape(content);
```

#### frontend/api-client.js
```javascript
// –ü–†–û–ë–õ–ï–ú–ê: –£–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –Ω–æ frontend –æ–∂–∏–¥–∞–ª snake_case
```

---

## –ê–ù–ê–õ–ò–ó –ö–û–†–ù–ï–í–´–• –ü–†–ò–ß–ò–ù –ü–†–û–í–ê–õ–ê

### ‚ùå –ß–¢–û –ü–û–®–õ–û –ù–ï –¢–ê–ö

#### 1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î**
- –î–æ–±–∞–≤–∏–ª–∏ –Ω–æ–≤—ã–µ —Å—Ç–æ–ª–±—Ü—ã –≤ –∫–æ–¥ –ë–ï–ó –º–∏–≥—Ä–∞—Ü–∏–∏
- –ö–æ–¥ –æ–∂–∏–¥–∞–ª —ç—Ç–∏ —Å—Ç–æ–ª–±—Ü—ã, –ë–î –∏—Ö –Ω–µ –∏–º–µ–ª–∞
- –≠—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫ –æ—à–∏–±–∫–∞–º –ø—Ä–∏ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö —Å –ë–î
- **–í—ã–≤–æ–¥**: –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –Ω—É–∂–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –º–∏–≥—Ä–∞—Ü–∏–π!

#### 2. **–ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ (snake_case vs camelCase)**
- Backend –≤–æ–∑–≤—Ä–∞—â–∞–ª –∏–Ω–æ–≥–¥–∞ camelCase, –∏–Ω–æ–≥–¥–∞ snake_case
- Frontend –æ–∂–∏–¥–∞–ª —Ç–æ –æ–¥–Ω–æ, —Ç–æ –¥—Ä—É–≥–æ–µ
- –≠—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ —Ö–∞–æ—Å –ø—Ä–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **–í—ã–≤–æ–¥**: –ù–£–ñ–ù–û –æ–¥–Ω–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ –≤–µ–∑–¥–µ

#### 3. **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ–∏—á –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º**
- –§–∏—á–∞ "Collection Pages" –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å –æ—à–∏–±–∫–∞–º–∏
- –û—à–∏–±–∫–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã —Ç–æ–ª—å–∫–æ –Ω–∞ production (XAMPP)
- **–í—ã–≤–æ–¥**: –ù–£–ñ–ù–´ unit/integration —Ç–µ—Å—Ç—ã –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

#### 4. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è –æ XSS —Ñ–∏–∫—Å–µ**
- Phase 2 XSS (Oct 18) –¥–æ–±–∞–≤–∏–ª –≥–ª–æ–±–∞–ª—å–Ω—ã–π escape –∫–æ—Ç–æ—Ä—ã–π —Å–ª–æ–º–∞–ª —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
- –ü—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ: "escape –≤—Å–µ–≥–¥–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ" - –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
- –ù—É–∂–Ω—ã —Ä–∞–∑–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **–í—ã–≤–æ–¥**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å security fixes –Ω–∞ –í–°–ï–• –ø—É—Ç—è—Ö, –Ω–µ —Ç–æ–ª—å–∫–æ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–º

#### 5. **Frontend-Backend —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω**
- Frontend –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è —Å backend –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
- –û—Ç–≤–µ—Ç API –∏–∑–º–µ–Ω–∏–ª—Å—è, frontend –ª–æ–º–∞–ª—Å—è
- **–í—ã–≤–æ–¥**: –ù–£–ñ–ù–û –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API

#### 6. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ –Ω–æ–≤—ã–º –ø–æ–ª—è–º**
- `renderedHtml`, `sourceTemplateSlug`, `menuTitle` –¥–æ–±–∞–≤–ª–µ–Ω—ã –±–µ–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ –∑–Ω–∞–ª –∏—Ö –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ
- –û–Ω–∏ –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –ë–î –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å
- **–í—ã–≤–æ–¥**: –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π

---

## –ê–ù–ê–õ–ò–ó –ü–õ–ê–ù–û–í COLLECTION FEATURE

### –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–ª–∞–Ω—ã:
1. **`COLLECTION_PAGE_IMPLEMENTATION_PLAN.md`** (19 Oct) - 200 —Å—Ç—Ä–æ–∫, –û–ß–ï–ù–¨ –ø–æ–¥—Ä–æ–±–Ω–æ
2. **`COLLECTION_PAGE_ARCHITECTURE_DIAGRAM.md`** (19 Oct) - –¥–∏–∞–≥—Ä–∞–º–º—ã –ø–æ—Ç–æ–∫–æ–≤
3. **`COLLECTION_PAGE_SECURITY_AUDIT.md`** - security review
4. **`AUTO_MENU_DEPLOY_PROMPT.md`** (5 Oct) - –æ –º–µ–Ω—é

### ‚úÖ –ß–¢–û –ë–´–õ–û –•–û–†–û–®–û –í –ü–õ–ê–ù–ê–•:

#### ‚úì –°—É–ø–µ—Ä –ø–æ–¥—Ä–æ–±–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `collectionConfig`:
```json
{
  "type": "auto-collection",
  "sourceTypes": ["article", "guide"],
  "sortBy": "publishedAt",
  "sortOrder": "desc",
  "limit": null,
  "excludePages": [],
  "sections": [{title, sourceTypes}],
  "cardImages": {pageId: url}
}
```
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Å–ø–µ—Ü–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ –≤ –ø–ª–∞–Ω–µ

#### ‚úì –ß–µ—Ç–∫–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º –≤—ã–±–æ—Ä–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∏ (4-step priority):
1. Custom (cardImages config)
2. Hero/main-screen image
3. Article-cards first image
4. Fallback default

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø–∏—Å–∞–Ω–æ

#### ‚úì Clean Architecture —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ:
- Domain Layer: Page entity methods
- Application: GetCollectionItems, UpdateCollectionCardImage use cases
- Infrastructure: MySQLPageRepository extensions
- Presentation: CollectionController
- Frontend: editor.js methods

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –ø–æ —Å–ª–æ—è–º

#### ‚úì DB –º–∏–≥—Ä–∞—Ü–∏—è –±—ã–ª–∞ —É–∫–∞–∑–∞–Ω–∞:
```sql
ALTER TABLE pages ADD COLUMN menu_title VARCHAR(255);
ALTER TABLE pages ADD COLUMN rendered_html LONGTEXT;
ALTER TABLE pages ADD COLUMN source_template_slug VARCHAR(255);
```

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –±—ã–ª–∞ –≤ –ø–ª–∞–Ω–∞—Ö (–Ω–æ –Ω–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–∞!)

---

### ‚ùå –ß–¢–û –ü–û–®–õ–û –ù–ï –¢–ê–ö (ROOT CAUSE ANALYSIS):

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 1: –ü–ª–∞–Ω –±—ã–ª –Ω–æ –ù–ï –ë–´–õ –†–ï–ê–õ–ò–ó–û–í–ê–ù
**–§–∞–∫—Ç**: COLLECTION_PAGE_IMPLEMENTATION_PLAN.md –Ω–∞ 19 Oct —Å–æ–¥–µ—Ä–∂–∞–ª:
- [x] –î–∏–∑–∞–π–Ω —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- [ ] **–ö–æ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Ç–æ–ª—å–∫–æ –ß–ê–°–¢–¨ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã**
- [ ] **Use Cases GetCollectionItems –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—ã–ª–∏ –Ω–∞–ø–∏—Å–∞–Ω—ã**
- [ ] **CollectionController –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—ã–ª —Å–æ–∑–¥–∞–Ω**
- [ ] **Frontend UI –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –Ω–µ –±—ã–ª —Å–¥–µ–ª–∞–Ω**

**–ü–æ—á–µ–º—É —Ç–∞–∫ –≤—ã—à–ª–æ**: 
- –ü–ª–∞–Ω –±—ã–ª –æ—á–µ–Ω—å –ø–æ–¥—Ä–æ–±–Ω—ã–π (200+ —Å—Ç—Ä–æ–∫)
- –ù–æ –±—ã–ª —Å–æ–∑–¥–∞–Ω –Ω–∞ 19 Oct, –∞ —Ñ–∏—á–∞ –¥–µ–ø–ª–æ–∏–ª–∞—Å—å 20 Oct –±–µ–∑ –ø–æ–ª–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –ó–Ω–∞—á–∏—Ç: **–ø–ª–∞–Ω –±—ã–ª –ø—Ä–æ—á–∏—Ç–∞–Ω, –Ω–æ –∫–æ–¥ –ø–∏—Å–∞–ª—Å—è –ø–æ –ø–∞–º—è—Ç–∏ / –Ω–µ–ø–æ–ª–Ω—ã–π**

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 2: –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø - –ë–î –º–∏–≥—Ä–∞—Ü–∏–∏ –í–û–û–ë–©–ï –ù–ï –ê–í–¢–û–ú–ê–¢–ò–ó–ò–†–û–í–ê–ù–´
**–ü–ª–∞–Ω –≥–æ–≤–æ—Ä–∏–ª:**
```markdown
## üîπ –°–õ–û–ô 3: Infrastructure Layer

#### 3.1. –û–±–Ω–æ–≤–∏—Ç—å MySQLPageRepository.php
–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ç–∏–ø—É –∏ —Å—Ç–∞—Ç—É—Å—É:
...
```

**–ß—Ç–æ –î–ï–ô–°–¢–í–ò–¢–ï–õ–¨–ù–û –ø—Ä–æ–∏–∑–æ—à–ª–æ:**
1. ALTER TABLE –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –í–†–£–ß–ù–£–Æ
2. –ë–ï–ó –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
3. –ë–ï–ó –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
4. –ë–ï–ó possibility –æ—Ç–∫–∞—Ç–∏—Ç—å if things go wrong

**–ì–¥–µ —ç—Ç–æ –≤–∑–æ—Ä–≤–∞–ª–æ—Å—å:**
- –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Å—Ç–æ–ª–±—Ü—ã –≤—Ç–æ—Ä–æ–π —Ä–∞–∑ ‚Üí SYNTAX ERROR
- –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ë–î ‚Üí –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –±—ã–ª–∏ –ø–æ –∑–∞–ø—Ä–æ—Å–æ–º –≤ –ë–î
- **–†–ï–ó–£–õ–¨–¢–ê–¢**: MySQL crash, –ø–æ—Ç–µ—Ä—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 3: –§–∏—á–∞ –±—ã–ª–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ü–û–õ–û–í–ò–ù–ß–ê–¢–û
**–ü–ª–∞–Ω –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–ª:**
- [x] Domain Entity (Page.php) ‚Äî –°–î–ï–õ–ê–ù–û
- [ ] Use Cases (GetCollectionItems.php) ‚Äî **–ù–ï –°–î–ï–õ–ê–ù–û**
- [x] Infrastructure (MySQLPageRepository) ‚Äî –ß–ê–°–¢–ò–ß–ù–û (–Ω–µ –±—ã–ª–æ –º–µ—Ç–æ–¥–∞)
- [ ] Presentation (CollectionController) ‚Äî **–ù–ï –°–î–ï–õ–ê–ù–û**
- [ ] Frontend (editor.js) ‚Äî **–ù–ï –°–î–ï–õ–ê–ù–û**

**–ü–æ—á–µ–º—É –ø–æ–ª–æ–≤–∏–Ω—á–∞—Ç–æ**:
- –ù–∞—á–∞–ª–∏ –ø–∏—Å–∞—Ç—å Code
- –ë–î –æ—Ç–≤–∞–ª–∏–ª–∞—Å—å –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ
- –ü—Ä–∏—à–ª–æ—Å—å —á–∏–Ω–∏—Ç—å —Å—Ä–æ—á–Ω–æ
- **–ù–µ –∑–∞–∫–æ–Ω—á–∏–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ –ø–ª–∞–Ω—É**

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 4: –ù–µ –±—ã–ª–æ FEATURE FLAG / PHASE-BASED ROLLOUT
**–ü–ª–∞–Ω –Ω–µ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–ª:**
```markdown
// –û–¢–°–£–¢–°–¢–í–£–ï–¢: –∫–∞–∫ –æ—Ç–∫–∞—Ç–∏—Ç—å if —á—Ç–æ-—Ç–æ –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫?
// –û–¢–°–£–¢–°–¢–í–£–ï–¢: –∫–∞–∫ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø–æ—ç—Ç–∞–ø–Ω–æ?
// –û–¢–°–£–¢–°–¢–í–£–ï–¢: –∫–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ production?
```

**–ß—Ç–æ –Ω—É–∂–Ω–æ –±—ã–ª–æ:**
```php
// config/features.php
return [
    'collection_pages' => env('ENABLE_COLLECTIONS', false),
];

// –í –∫–æ–¥–µ:
if (config('features.collection_pages')) {
    // –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
} else {
    // –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å –±–µ–∑ –ø–æ–ª–Ω–æ–≥–æ redeploy

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 5: –ù–µ—Ç AUTOMATED TESTING –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
**–ü–ª–∞–Ω –≥–æ–≤–æ—Ä–∏–ª:**
```markdown
### Testing
- [ ] Unit-—Ç–µ—Å—Ç—ã –¥–ª—è GetCollectionItems
- [ ] E2E —Ç–µ—Å—Ç: —Å–æ–∑–¥–∞—Ç—å article ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏–µ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
```

**–ß—Ç–æ –†–ï–ê–õ–¨–ù–û –±—ã–ª–æ:**
- No tests written
- Code deployed directly to XAMPP
- MySQL crash happened immediately

**–ì–¥–µ –≤–∑–æ—Ä–≤–∞–ª–æ—Å—å:**
- –ü—Ä–∏ CREATE Page ‚Üí collectionConfig –±—ã–ª NULL
- –ù–æ –∫–æ–¥ –æ–∂–∏–¥–∞–ª array
- ‚Üí PHP Notice ‚Üí MySQL error ‚Üí full crash

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 6: Response Format –Ω–µ –±—ã–ª –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω
**–ü–ª–∞–Ω –Ω–µ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–ª:**
```
API /api/pages ‚Üí —á—Ç–æ –≤ –æ—Ç–≤–µ—Ç–µ?
  // –í –ø–ª–∞–Ω–µ: –Ω–µ —Å–∫–∞–∑–∞–Ω–æ!
  // –í –∫–æ–¥–µ: —Ç–æ camelCase, —Ç–æ snake_case
  // –ù–∞ frontend: –Ω–µ–ª–æ–≤–∫–æ –ª–æ–≤–∏—Ç—å —Ç–æ –æ–¥–Ω–æ —Ç–æ –¥—Ä—É–≥–æ–µ
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞:**
- CollectionController –≤–æ–∑–≤—Ä–∞—â–∞–ª –±—ã —Å–≤–æ–π —Ñ–æ—Ä–º–∞—Ç
- Frontend –æ–∂–∏–¥–∞–ª –±—ã –¥—Ä—É–≥–æ–π
- ‚Üí Integration failure

---

### üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –û–®–ò–ë–û–ö:

| –ü—Ä–æ–±–ª–µ–º–∞ | –ü–ª–∞–Ω –ì–æ–≤–æ—Ä–∏–ª | –ö–æ–¥ –°–¥–µ–ª–∞–ª | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|----------|--------------|-----------|-----------|
| collectionConfig —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ | ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ | ‚ùå –ü–æ–ª–æ–≤–∏–Ω—á–∞—Ç–æ | Crash –ø—Ä–∏ NULL |
| DB –º–∏–≥—Ä–∞—Ü–∏–∏ | ‚ö†Ô∏è –£–∫–∞–∑–∞–Ω–æ –Ω–æ –Ω–µ automated | ‚ùå –†—É—á–Ω—ã–µ ALTER TABLE | MySQL corruption |
| Use Cases | ‚úÖ –í –ø–ª–∞–Ω–µ –¥–∏–∑–∞–π–Ω | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã | –ù–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ |
| API –∫–æ–Ω—Ç—Ä–∞–∫—Ç | ‚ö†Ô∏è –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–ª–æ—Å—å | ‚ùå –ù–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ | Frontend-backend mismatch |
| Feature flags | ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –ø–ª–∞–Ω–µ | ‚ùå –ù–µ—Ç –≤ –∫–æ–¥–µ | No way to rollback |
| Tests | ‚úÖ –í —á–µ–∫–ª–∏—Å—Ç–µ | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã | Bug –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ prod |

---

### üéØ –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê (ROOT CAUSE):

**–ù–µ –±—ã–ª–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –º–µ–∂–¥—É PLANNING –∏ EXECUTION:**

```
Oct 19:  Plan –Ω–∞–ø–∏—Å–∞–Ω (200+ —Å—Ç—Ä–æ–∫, –æ—á–µ–Ω—å –ø–æ–¥—Ä–æ–±–Ω–æ) ‚úÖ
         ‚îî‚îÄ –ù–æ —Ñ–∞–π–ª –ø—Ä–æ—Å—Ç–æ –ª–µ–∂–∏—Ç –≤ docs/

Oct 20 —É—Ç—Ä–æ: –ö—Ç–æ-—Ç–æ –Ω–∞—á–∞–ª –∫–æ–¥–∏—Ç—å –ø–æ –ø–∞–º—è—Ç–∏ ‚ùå
            ‚îî‚îÄ –ù–µ –≥–ª—è–¥—è –≤ –ø–ª–∞–Ω
            ‚îî‚îÄ –†–µ–∞–ª–∏–∑–æ–≤–∞–ª —Ç–æ–ª—å–∫–æ ~20% –æ—Ç —Ç–æ–≥–æ —á—Ç–æ —Ç–∞–º –æ–ø–∏—Å–∞–Ω–æ
            ‚îî‚îÄ –î–æ–±–∞–≤–∏–ª —Å—Ç–æ–ª–±—Ü—ã –ë–î –≤—Ä—É—á–Ω—É—é –≤–º–µ—Å—Ç–æ –º–∏–≥—Ä–∞—Ü–∏–∏

Oct 20 –ø–æ–ª–¥–µ–Ω—å: MySQL crash üí•
               ‚îî‚îÄ –í—Å–µ –æ—Å–æ–∑–Ω–∞—é—Ç: –Ω—É–∂–Ω–æ —á–∏–Ω–∏—Ç—å —Å—Ä–æ—á–Ω–æ
               ‚îî‚îÄ Original plan –∑–∞–±—ã—Ç
               ‚îî‚îÄ –ß–∏–Ω—è—Ç "–Ω–∞ —Ö–æ–¥—É" –±–µ–∑ —Å–∏—Å—Ç–µ–º—ã

Oct 20 –≤–µ—á–µ—Ä: –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ –ø–æ–ª–æ–≤–∏–Ω—á–∞—Ç–∞—è ‚ö†Ô∏è
             ‚îî‚îÄ Get CollectionItems –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
             ‚îî‚îÄ UpdateCollectionCardImage –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
             ‚îî‚îÄ Frontend UI –Ω–µ –≥–æ—Ç–æ–≤
             ‚îî‚îÄ –ù–æ –ø–æ—Ö–æ–∂–µ "—Ä–∞–±–æ—Ç–∞–µ—Ç" ‚úÖ (–ø–æ –ø–µ—Ä–≤–æ–º—É –≤–∑–≥–ª—è–¥—É)
```

**–í—ã–≤–æ–¥**: **–ü–õ–ê–ù –ë–´–õ, –ù–û –ï–ì–û –ù–ò–ö–¢–û –ù–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–õ –ö–ê–ö –ò–°–¢–û–ß–ù–ò–ö –ò–°–¢–ò–ù–´**

---

### üî• –ö–û–ù–ö–†–ï–¢–ù–´–ï –°–¢–†–û–ö–ò –ö–û–î–ê –ß–¢–û –°–õ–û–ú–ê–õ–ò–°–¨

#### –ò–∑ COLLECTION_PAGE_IMPLEMENTATION_PLAN.md (Line 57-75):
```php
// –≠—Ç–æ –î–û –ö–û–ù–¶–ê –ù–ï –ë–´–õ–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û:
public function execute(string $collectionPageId): array
{
    // 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–æ–ª–ª–µ–∫—Ü–∏–∏
    $collectionPage = $this->pageRepository->findById($collectionPageId);
    
    if (!$collectionPage || !$collectionPage->getType()->isCollection()) {
        throw new \InvalidArgumentException('Page is not a collection');
    }
```

**–ü–æ—á–µ–º—É –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ?** - –ö–ª–∞—Å—Å GetCollectionItems.php –í–û–û–ë–©–ï –ù–ï –°–£–©–ï–°–¢–í–£–ï–¢ –≤ –∫–æ–¥–µ!

#### –ò–∑ COLLECTION_PAGE_ARCHITECTURE_DIAGRAM.md:
```
GetCollectionItems Use Case
   ‚Üì
1. Load Collection Page
2. Read collectionConfig
3. Query published pages
4. Sort & group by sections
5. Resolve card images
```

**–ß—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –µ—Å—Ç—å?** - Only step 2 works (read collectionConfig), others not implemented

---

### ‚ùå –ü–û–ß–ï–ú–£ –ö–û–õ–õ–ï–ö–¶–ò–ò –ù–ï –†–ê–ë–û–¢–ê–Æ–¢ –°–ï–ô–ß–ê–°

1. **GetCollectionItems.php –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç** ‚Üí –ù–µ–ª—å–∑—è –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏
2. **UpdateCollectionCardImage.php –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç** ‚Üí –ù–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∫–∞—Ä—Ç–æ—á–µ–∫
3. **CollectionController –Ω–µ —Å–æ–∑–¥–∞–Ω** ‚Üí –ù–µ—Ç API endpoints
4. **Frontend UI –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç** ‚Üí –ù–µ–ª—å–∑—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é
5. **No automatic collection assembly** ‚Üí –ö–æ–ª–ª–µ–∫—Ü–∏—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è, –Ω–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –§–∏—á–∞ 0% —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–∞, —Ö–æ—Ç—è –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ "–¥–æ–±–∞–≤–ª–µ–Ω–æ"

---

---

## –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –î–õ–Ø –ë–£–î–£–©–ï–ì–û

### üõ°Ô∏è –ü–†–û–¶–ï–°–° –†–ê–ó–†–ê–ë–û–¢–ö–ò

1. **–î–û –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–∏—á–∏:**
   - [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –ë–î
   - [ ] –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é (–Ω–µ ALTER TABLE –≤—Ä—É—á–Ω—É—é)
   - [ ] –û–±–Ω–æ–≤–∏—Ç—å Entity –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
   - [ ] –û–±–Ω–æ–≤–∏—Ç—å DTO –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
   - [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å API –∫–æ–Ω—Ç—Ä–∞–∫—Ç (–∫–∞–∫–æ–π JSON –≤–µ—Ä–Ω—ë–º)

2. **–ü–û–°–õ–ï –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–¥–∞:**
   - [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è CreatePage/UpdatePage
   - [ ] Integration —Ç–µ—Å—Ç—ã –¥–ª—è API endpoints
   - [ ] Smoke —Ç–µ—Å—Ç—ã –Ω–∞ –≤—Å–µ—Ö –ø—É—Ç—è—Ö (–Ω–µ —Ç–æ–ª—å–∫–æ happy path)
   - [ ] Security review (–æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è XSS-prone —Ñ–∏—á)

3. **–ü–ï–†–ï–î –¥–µ–ø–ª–æ–µ–º –Ω–∞ XAMPP:**
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ frontend –∏ backend —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é API –≤ –æ–±–æ–∏—Ö –º–µ—Å—Ç–∞—Ö
   - [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å smoke —Ç–µ—Å—Ç—ã

### üìã –ò–ú–ï–ù–û–í–ê–ù–ò–ï –ò –°–¢–ê–ù–î–ê–†–¢–´

**–ü–†–ò–ù–¶–ò–ü**: –í–µ–∑–¥–µ camelCase –≤ API responses
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: `{ pageId: "...", renderedHtml: "...", menuTitle: "..." }`
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: `{ page_id: "...", rendered_html: "...", menu_label: "..." }`

**–ü–†–ò–ù–¶–ò–ü**: –í –ë–î snake_case, –ø—Ä–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏ –≤ DTO/API ‚Üí camelCase
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `EntityToArrayTransformer` –¥–ª—è —ç—Ç–æ–≥–æ

### üîí SECURITY

**–ü–†–ò–ù–¶–ò–ü**: –ö–∞–∂–¥—ã–π —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏–º–µ–µ—Ç —Å–≤–æ—é –ø–æ–ª–∏—Ç–∏–∫—É:
- `userContent` (–∏–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞) ‚Üí –º–æ–∂–Ω–æ HTML —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ (DOMPurify)
- `plainText` (–∏–∑ —Ñ–æ—Ä–º) ‚Üí escape –≤—Å–µ–≥–¥–∞
- `renderedHtml` (–∫—ç—à) ‚Üí –∫–∞–∫ `userContent` –Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ HTMLPurifier –Ω–∞ backend

**–ü–†–ò–ù–¶–ò–ü**: CSP –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç—Ä–æ–≥–∏–º:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: `script-src 'self' 'nonce-...'` (–±–µ–∑ unsafe-inline)
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: `script-src 'self' 'unsafe-inline'` (—Å–ª–∏—à–∫–æ–º –æ—Ç–∫—Ä—ã—Ç–æ)

---

## –°–¢–ê–¢–ò–°–¢–ò–ö–ê –í–†–ï–ú–ï–ù–ò

| –§–∞–∑–∞ | –í—Ä–µ–º—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-------|---------|
| –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ Collection | 8+ —á–∞—Å–æ–≤ | –î–æ–±–∞–≤–∏–ª–∏ –Ω–æ–≤—É—é —Ñ–∏—á—É –±–µ–∑ —Ç–µ—Å—Ç–æ–≤ |
| –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–∞–¥–µ–Ω–∏—è | 5 –º–∏–Ω—É—Ç | MySQL –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É |
| –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ | 1 —á–∞—Å | –í—ã—è—Å–Ω–∏–ª–∏ —á—Ç–æ —ç—Ç–æ –ë–î –ø—Ä–æ–±–ª–µ–º–∞ |
| –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ | 3 —á–∞—Å–∞ | –î–æ–±–∞–≤–∏–ª–∏ —Å—Ç–æ–ª–±—Ü—ã –∏ –∫–æ–¥ fixes |
| –ß–∏–Ω–µ–Ω–∏–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ | 2 —á–∞—Å–∞ | –ò—Å–ø—Ä–∞–≤–∏–ª–∏ XSS + –∫–∞—Ä—Ç–∏–Ω–∫–∏ + –∫—É–∫–∏ |
| –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è API | 1 —á–∞—Å | –ü—Ä–∏–≤–µ–ª–∏ camelCase –≤–µ–∑–¥–µ |
| **–ò–¢–û–ì–û** | **20 —á–∞—Å–æ–≤** | –û—Ç –∏–¥–µ–∏ –¥–æ —Ä–∞–±–æ—Ç–∞—é—â–µ–π —Å–∏—Å—Ç–µ–º—ã |

---

## –ü–û–°–¢–ú–û–†–¢–ï–ú: –ß–¢–û –í–´–£–ß–ò–õ–ò

### üö´ –ù–ï –î–ï–õ–ê–¢–¨
1. ‚ùå –î–æ–±–∞–≤–ª—è—Ç—å —Å—Ç–æ–ª–±—Ü—ã –ë–î –≤—Ä—É—á–Ω—É—é –≤–º–µ—Å—Ç–æ –º–∏–≥—Ä–∞—Ü–∏–π
2. ‚ùå –ú–µ–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É API –æ—Ç–≤–µ—Ç–æ–≤ –±–µ–∑ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
3. ‚ùå –ü—Ä–∏–º–µ–Ω—è—Ç—å security fix –≥–ª–æ–±–∞–ª—å–Ω–æ –±–µ–∑ —É—á–µ—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
4. ‚ùå –î–µ–ø–ª–æ–∏—Ç—å –±–µ–∑ smoke —Ç–µ—Å—Ç–æ–≤
5. ‚ùå –ü–∏—Å–∞—Ç—å –∫–æ–¥ –ë–ï–ó –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∑–∞ –Ω–æ–≤—ã–µ –ø–æ–ª—è

### ‚úÖ –î–ï–õ–ê–¢–¨
1. ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –í–°–ï–• –∏–∑–º–µ–Ω–µ–Ω–∏–π –ë–î
2. ‚úÖ API –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (v1/, v2/)
3. ‚úÖ Context-aware security (–Ω–µ apply-everywhere)
4. ‚úÖ Automated smoke/integration —Ç–µ—Å—Ç—ã –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
5. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π
6. ‚úÖ Code review –î–û –¥–µ–ø–ª–æ—è, –Ω–µ –ø–æ—Å–ª–µ

---

## –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô –ù–ê –ë–£–î–£–©–ï–ï

### –ù–ï–û–¢–õ–û–ñ–ù–û (—Å–µ–≥–æ–¥–Ω—è)
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é —Å—Ö–µ–º—É –ë–î
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è Oct 20 –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å smoke —Ç–µ—Å—Ç—ã –¥–ª—è critical paths

### –°–ö–û–†–û (–Ω–µ–¥–µ–ª—è)
- [ ] –í–Ω–µ–¥—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –º–∏–≥—Ä–∞—Ü–∏–π (Laravel/Doctrine/custom)
- [ ] –°–æ–∑–¥–∞—Ç—å API –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Ç–µ—Å—Ç—ã

### –°–†–ï–î–ù–ï (–º–µ—Å—è—Ü)
- [ ] –ü–µ—Ä–µ–¥–µ–ª–∞—Ç—å security approach (–Ω–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–π escape)
- [ ] –î–æ–±–∞–≤–∏—Ç—å automated deployment —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –Ω–æ–≤—ã–µ —Ñ–∏—á–∏ –≤ wiki

---

**–î–ê–¢–ê –ü–ò–°–ê–ù–ò–Ø**: Oct 20, 2025, 18:00 UTC+2
**–ù–ê–ü–ò–°–ê–õ**: GitHub Copilot
**–°–¢–ê–¢–£–°**: Production incident –ø–æ—Å—Ç–º–æ—Ä—Ç–µ–º
