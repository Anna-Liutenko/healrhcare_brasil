# üß™ E2E Tests - Quick Start Guide

## –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ (2 —à–∞–≥–∞)

### –®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
**–û—Ç–∫—Ä–æ–π—Ç–µ PowerShell –æ–∫–Ω–æ ‚Ññ1:**
```powershell
cd backend
$env:DB_DEFAULT='sqlite'
$env:DB_DATABASE="$PWD\tests\tmp\e2e.sqlite"
php -S 127.0.0.1:8089 -t public
```

‚úÖ –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è: `PHP 8.2.12 Development Server (http://127.0.0.1:8089) started`

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã
**–û—Ç–∫—Ä–æ–π—Ç–µ PowerShell –æ–∫–Ω–æ ‚Ññ2:**
```powershell
cd backend
php vendor\bin\phpunit --filter testPageEditWorkflow tests\E2E\HttpApiE2ETest.php
```

---

## –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è?

### ‚úÖ Test: `testPageEditWorkflow`
–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã —Å CMS:

1. **CREATE** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
2. **UPDATE** ‚Äî —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (—Ç–µ–∫—Å—Ç + hero –±–ª–æ–∫)
3. **PUBLISH** ‚Äî –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
4. **VERIFY** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—É–±–ª–∏—á–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
- API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º ID
- –û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—É–±–ª–∏—á–Ω—ã–π URL –¥–æ—Å—Ç—É–ø–µ–Ω
- HTML —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç

---

## Troubleshooting

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: "Could not connect to server"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –≤ –æ–∫–Ω–µ ‚Ññ1

```powershell
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ—Ä—Ç 8089 —Å–ª—É—à–∞–µ—Ç
Test-NetConnection -ComputerName 127.0.0.1 -Port 8089
```

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: "Class not found" –∏–ª–∏ autoload errors
**–†–µ—à–µ–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```powershell
cd backend
php composer.phar install
```

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: "Table not found"
**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ SQLite –ë–î

```powershell
Remove-Item backend\tests\tmp\e2e.sqlite
# –ó–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä (—à–∞–≥ 1)
```

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: Tests skip with "Built-in PHP server failed to start"
**–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –ú—ã –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞.  
–ü—Ä–æ—Å—Ç–æ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤—ã—à–µ (2 –æ–∫–Ω–∞).

---

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç:

```powershell
.\run-e2e-tests.ps1
```

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –°–µ—Ä–≤–µ—Ä –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ!

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
backend/tests/E2E/
‚îú‚îÄ‚îÄ HttpApiE2ETest.php       ‚Üê –û—Å–Ω–æ–≤–Ω–æ–π E2E —Ç–µ—Å—Ç
‚îú‚îÄ‚îÄ HttpImportE2ETest.php    ‚Üê –¢–µ—Å—Ç –∏–º–ø–æ—Ä—Ç–∞ —à–∞–±–ª–æ–Ω–æ–≤
‚îú‚îÄ‚îÄ server_bootstrap.php     ‚Üê Bootstrap –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
‚îî‚îÄ‚îÄ test_*.php               ‚Üê –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã
```

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

- [ ] –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ E2E —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- [ ] Playwright UI —Ç–µ—Å—Ç—ã
- [ ] CI/CD integration
- [ ] Docker –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏
- [ ] –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ –ø—É—Ç—å –±–µ–∑ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã

**–°–º. —Ç–∞–∫–∂–µ:** [`docs/E2E_INVESTIGATION_REPORT.md`](./E2E_INVESTIGATION_REPORT.md)
