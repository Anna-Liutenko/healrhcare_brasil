# üéØ –ü–ª–∞–Ω: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–µ–Ω—é –∏–∑ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

**–î–∞—Ç–∞:** 5 –æ–∫—Ç—è–±—Ä—è 2025  
**–ê–≤—Ç–æ—Ä:** Claude + Anna

---

## üìå –ü—Ä–æ–±–ª–µ–º–∞

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:**
- Menu Editor —Å–æ–∑–¥–∞–Ω –∫–∞–∫ –∞–¥–º–∏–Ω-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (—Ä—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—É–Ω–∫—Ç–∞–º–∏)
- –ö–ª–∏–µ–Ω—Ç—É —Å–ª–æ–∂–Ω–æ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è: –Ω—É–∂–Ω–æ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É + –¥–æ–±–∞–≤–ª—è—Ç—å –≤ –º–µ–Ω—é –≤—Ä—É—á–Ω—É—é
- –ü—Ä–æ—Ç–æ—Ç–∏–ø —Å–∞–π—Ç–∞ –∏–º–µ–µ—Ç —á—ë—Ç–∫–æ–µ –º–µ–Ω—é (–ì–ª–∞–≤–Ω–∞—è / –ì–∞–π–¥—ã / –ë–ª–æ–≥ / –ë–æ—Ç)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
1. –ö–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞—ë—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –≤–∏–∑—É–∞–ª—å–Ω–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
2. –ö–ª–∏–µ–Ω—Ç –ø—É–±–ª–∏–∫—É–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É
3. –°—Ç—Ä–∞–Ω–∏—Ü–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –º–µ–Ω—é —Å–∞–π—Ç–∞
4. –ù–∞–∑–≤–∞–Ω–∏–µ –ø—É–Ω–∫—Ç–∞ –º–µ–Ω—é = –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–∫–æ—Ç–æ—Ä–æ–µ –∫–ª–∏–µ–Ω—Ç –∑–∞–¥–∞–ª)
5. –ë–µ–∑ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –±–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –º–µ–Ω—é

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –î–≤–∞ –ø–æ–¥—Ö–æ–¥–∞

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–µ–Ω—é (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)**

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –¢–∞–±–ª–∏—Ü–∞ `pages` –∏–º–µ–µ—Ç –ø–æ–ª—è:
   - `status` ('draft' | 'published' | 'archived')
   - `visibility` ('public' | 'unlisted' | 'private')
   - `show_in_menu` (boolean) ‚Äî **–Ω–æ–≤–æ–µ –ø–æ–ª–µ**
   - `menu_position` (integer) ‚Äî **–Ω–æ–≤–æ–µ –ø–æ–ª–µ**
   
2. –ü—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
   - –ß–µ–∫–±–æ–∫—Å "–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤ –º–µ–Ω—é" (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: ‚úÖ)
   - Input "–ü–æ—Ä—è–¥–æ–∫ –≤ –º–µ–Ω—é" (–∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ: —Å–ª–µ–¥—É—é—â–∞—è –ø–æ–∑–∏—Ü–∏—è)

3. –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Å–∞–π—Ç–∞:
   ```javascript
   // GET /api/menu ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ published + public + show_in_menu=true
   const menuItems = await apiClient.getPublicMenu();
   // [
   //   { title: "–ì–ª–∞–≤–Ω–∞—è", slug: "/", position: 1 },
   //   { title: "–ì–∞–π–¥—ã", slug: "/guides", position: 2 },
   //   { title: "–ë–ª–æ–≥", slug: "/blog", position: 3 }
   // ]
   ```

4. –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –º–µ–Ω—é:
   ```html
   <nav class="main-nav">
       <ul>
           <li v-for="item in menuItems" :key="item.slug">
               <a :href="item.slug">{{ item.title }}</a>
           </li>
       </ul>
   </nav>
   ```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü—Ä–æ—Å—Ç–æ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ (–æ–¥–∏–Ω –∫–ª–∏–∫ –ø—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏)
- ‚úÖ –ù–µ –Ω—É–∂–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–∞—è –∞–¥–º–∏–Ω–∫–∞ –º–µ–Ω—é
- ‚úÖ –ú–µ–Ω—é –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–Ω—è—Ç–∞ —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ ‚Üí –∏—Å—á–µ–∑–ª–∞ –∏–∑ –º–µ–Ω—é)
- ‚úÖ –ú–∏–Ω–∏–º—É–º –∫–æ–¥–∞

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –ù–µ–ª—å–∑—è –¥–æ–±–∞–≤–∏—Ç—å –≤–Ω–µ—à–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –≤ –º–µ–Ω—é (—Ç–æ–ª—å–∫–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–∞–π—Ç–∞)
- ‚ùå –ù–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ (–ø–æ–¥–º–µ–Ω—é)

---

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –ì–∏–±—Ä–∏–¥–Ω–æ–µ –º–µ–Ω—é (–¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö)**

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–µ–Ω—é (–≤–∞—Ä–∏–∞–Ω—Ç 1)
2. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π Menu Editor –¥–ª—è:
   - –î–æ–±–∞–≤–ª–µ–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö —Å—Å—ã–ª–æ–∫ ("–ë–æ—Ç" ‚Üí —Å—Å—ã–ª–∫–∞ –Ω–∞ Telegram)
   - –°–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥–º–µ–Ω—é ("–ì–∞–π–¥—ã" ‚Üí "SUS", "Plano de Sa√∫de", "–í—Ä–∞—á–∏")
   - –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ "–û —Å–∏—Å—Ç–µ–º–µ SUS" ‚Üí –≤ –º–µ–Ω—é "SUS")

3. –¢–∞–±–ª–∏—Ü–∞ `menu_items`:
   - `type` ('page' | 'external' | 'category')
   - `page_id` (UUID | null) ‚Äî –µ—Å–ª–∏ type='page'
   - `url` (string | null) ‚Äî –µ—Å–ª–∏ type='external'
   - `label` (string) ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –≤ –º–µ–Ω—é (–µ—Å–ª–∏ NULL ‚Üí –±–µ—Ä—ë–º page.title)
   - `position` (integer)
   - `parent_id` (UUID | null) ‚Äî –¥–ª—è –ø–æ–¥–º–µ–Ω—é

4. API endpoint:
   ```php
   GET /api/menu/public
   
   // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
   [
     { label: "–ì–ª–∞–≤–Ω–∞—è", url: "/", type: "page" },
     { 
       label: "–ì–∞–π–¥—ã", 
       url: "/guides", 
       type: "category",
       children: [
         { label: "SUS", url: "/guides/sus", type: "page" },
         { label: "–ß–∞—Å—Ç–Ω—ã–µ —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏", url: "/guides/insurance", type: "page" }
       ]
     },
     { label: "–ë–æ—Ç", url: "https://t.me/your_bot", type: "external" }
   ]
   ```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–∏–±–∫–æ—Å—Ç—å (–≤–Ω–µ—à–Ω–∏–µ —Å—Å—ã–ª–∫–∏, –ø–æ–¥–º–µ–Ω—é)
- ‚úÖ –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Å—ë —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
- ‚úÖ –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—É–Ω–∫—Ç–∞ –º–µ–Ω—é

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –°–ª–æ–∂–Ω–µ–µ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ (–Ω—É–∂–Ω–æ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è —Å Menu Editor)
- ‚ùå –ë–æ–ª—å—à–µ –∫–æ–¥–∞ (–Ω—É–∂–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è pages ‚Üî menu_items)

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–î–ª—è "–ø—Ä–æ–¥–∞–≤—Ü–∞ –º–∞–Ω–¥–∞—Ä–∏–Ω–æ–≤": –í–∞—Ä–∏–∞–Ω—Ç 1 (–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–µ–Ω—é)**

**–ü–æ—á–µ–º—É:**
1. ‚úÖ –ü—Ä–æ—Å—Ç –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ (–∫–ª–∏–µ–Ω—Ç –ø—É–±–ª–∏–∫—É–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Üí –æ–Ω–∞ –≤ –º–µ–Ω—é)
2. ‚úÖ –ù–µ –Ω—É–∂–Ω–æ —É—á–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ —Ä–∞–±–æ—Ç–∞—Ç—å —Å Menu Editor
3. ‚úÖ –ú–µ–Ω—é –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ (–Ω–µ—Ç "–±–∏—Ç—ã—Ö" —Å—Å—ã–ª–æ–∫)
4. ‚úÖ –ë—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (1-2 –¥–Ω—è)

**–ö–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –í–∞—Ä–∏–∞–Ω—Ç 2:**
- –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç—É –Ω—É–∂–Ω—ã –≤–Ω–µ—à–Ω–∏–µ —Å—Å—ã–ª–∫–∏ (—Å–æ—Ü. —Å–µ—Ç–∏, –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä—ã)
- –ï—Å–ª–∏ –Ω–∞ —Å–∞–π—Ç–µ —Å–ª–æ–∂–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
- –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —Ö–æ—á–µ—Ç "—Å–ø—Ä—è—Ç–∞—Ç—å" –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–µ—Å—Ç—å, –Ω–æ –Ω–µ –≤ –º–µ–Ω—é)

---

## üìã –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –í–∞—Ä–∏–∞–Ω—Ç–∞ 1 (–ø–æ—à–∞–≥–æ–≤–æ)

### **–≠—Ç–∞–ø 1: –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î**

**–ú–∏–≥—Ä–∞—Ü–∏—è `011_add_menu_fields_to_pages.sql`:**
```sql
-- –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–µ–Ω—é
ALTER TABLE pages 
ADD COLUMN show_in_menu BOOLEAN NOT NULL DEFAULT TRUE,
ADD COLUMN menu_position INT NULL,
ADD COLUMN menu_label VARCHAR(255) NULL;

-- –ò–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –≤—ã–±–æ—Ä–∫–∏ –ø—É–Ω–∫—Ç–æ–≤ –º–µ–Ω—é
CREATE INDEX idx_pages_menu ON pages(status, visibility, show_in_menu, menu_position);

-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
COMMENT ON COLUMN pages.show_in_menu IS '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –º–µ–Ω—é (—Ç–æ–ª—å–∫–æ –¥–ª—è published + public)';
COMMENT ON COLUMN pages.menu_position IS '–ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä –≤ –º–µ–Ω—é (NULL = –Ω–µ –≤ –º–µ–Ω—é)';
COMMENT ON COLUMN pages.menu_label IS '–ù–∞–∑–≤–∞–Ω–∏–µ –≤ –º–µ–Ω—é (–µ—Å–ª–∏ NULL ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è title)';
```

---

### **–≠—Ç–∞–ø 2: –û–±–Ω–æ–≤–∏—Ç—å Backend API**

**2.1. –ù–æ–≤—ã–π endpoint: GET /api/menu/public**

```php
// src/Presentation/Controllers/MenuController.php

public function getPublicMenu(): void
{
    try {
        $pageRepository = new MySQLPageRepository();
        
        // –ü–æ–ª—É—á–∞–µ–º —Ç–æ–ª—å–∫–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å show_in_menu=true
        $pages = $pageRepository->getMenuPages();
        
        $menuItems = array_map(function($page) {
            return [
                'label' => $page->getMenuLabel() ?? $page->getTitle(),
                'url' => '/' . $page->getSlug(),
                'slug' => $page->getSlug(),
                'position' => $page->getMenuPosition()
            ];
        }, $pages);
        
        // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ position
        usort($menuItems, fn($a, $b) => $a['position'] <=> $b['position']);
        
        $this->jsonResponse(['data' => $menuItems], 200);
        
    } catch (\Exception $e) {
        error_log("MenuController::getPublicMenu() error: " . $e->getMessage());
        $this->jsonResponse([
            'error' => 'Failed to load menu'
        ], 500);
    }
}
```

**2.2. –û–±–Ω–æ–≤–∏—Ç—å PageRepository:**

```php
// src/Infrastructure/Persistence/MySQLPageRepository.php

public function getMenuPages(): array
{
    $stmt = $this->pdo->prepare("
        SELECT id, title, slug, menu_label, menu_position
        FROM pages
        WHERE status = 'published'
          AND visibility = 'public'
          AND show_in_menu = TRUE
        ORDER BY menu_position ASC, created_at DESC
    ");
    
    $stmt->execute();
    return $stmt->fetchAll(PDO::FETCH_CLASS, Page::class);
}
```

**2.3. –û–±–Ω–æ–≤–∏—Ç—å —Ä–æ—É—Ç–∏–Ω–≥:**

```php
// backend/public/index.php

if ($method === 'GET' && $path === '/api/menu/public') {
    $controller = new MenuController();
    $controller->getPublicMenu();
    exit;
}
```

---

### **–≠—Ç–∞–ø 3: –û–±–Ω–æ–≤–∏—Ç—å Page Entity**

```php
// src/Domain/Entities/Page.php

class Page
{
    private ?bool $showInMenu;
    private ?int $menuPosition;
    private ?string $menuLabel;
    
    // ... constructors, getters, setters
    
    public function getShowInMenu(): bool
    {
        return $this->showInMenu ?? true;
    }
    
    public function getMenuPosition(): ?int
    {
        return $this->menuPosition;
    }
    
    public function getMenuLabel(): ?string
    {
        return $this->menuLabel;
    }
}
```

---

### **–≠—Ç–∞–ø 4: –û–±–Ω–æ–≤–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä**

**4.1. –î–æ–±–∞–≤–∏—Ç—å UI —ç–ª–µ–º–µ–Ω—Ç—ã –≤ `editor.html`:**

```html
<!-- –í —Å–µ–∫—Ü–∏—é "Page Settings" (–ø—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å) -->
<div class="settings-section">
    <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</h3>
    
    <div class="form-group">
        <label>
            <input type="checkbox" v-model="pageSettings.showInMenu">
            –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤ –º–µ–Ω—é —Å–∞–π—Ç–∞
        </label>
        <small class="help-text">
            –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ—è–≤–∏—Ç—Å—è –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
        </small>
    </div>
    
    <div class="form-group" v-if="pageSettings.showInMenu">
        <label>–ü–æ–∑–∏—Ü–∏—è –≤ –º–µ–Ω—é</label>
        <input 
            type="number" 
            v-model.number="pageSettings.menuPosition" 
            min="1"
            placeholder="–ê–≤—Ç–æ"
        >
        <small class="help-text">
            –ú–µ–Ω—å—à–µ–µ —á–∏—Å–ª–æ = –≤—ã—à–µ –≤ –º–µ–Ω—é (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–∑–∏—Ü–∏–∏)
        </small>
    </div>
    
    <div class="form-group" v-if="pageSettings.showInMenu">
        <label>–ù–∞–∑–≤–∞–Ω–∏–µ –≤ –º–µ–Ω—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
        <input 
            type="text" 
            v-model="pageSettings.menuLabel" 
            :placeholder="pageTitle || '–ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã'"
        >
        <small class="help-text">
            –ï—Å–ª–∏ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        </small>
    </div>
</div>
```

**4.2. –û–±–Ω–æ–≤–∏—Ç—å `editor.js`:**

```javascript
data() {
    return {
        // ... existing data
        pageSettings: {
            showInMenu: true,      // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–µ–Ω–æ
            menuPosition: null,    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–∑–∏—Ü–∏—è
            menuLabel: null        // –ò—Å–ø–æ–ª—å–∑—É–µ–º title —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        }
    }
},

methods: {
    async savePage() {
        const pageData = {
            title: this.pageTitle,
            slug: this.pageSlug,
            type: this.pageType,
            status: this.pageStatus,
            blocks: this.blocks.map(blockToAPI),
            
            // –ù–æ–≤—ã–µ –ø–æ–ª—è –¥–ª—è –º–µ–Ω—é
            show_in_menu: this.pageSettings.showInMenu,
            menu_position: this.pageSettings.menuPosition,
            menu_label: this.pageSettings.menuLabel
        };
        
        // ... rest of save logic
    },
    
    async loadPage(id) {
        const response = await this.apiClient.getPageById(id);
        
        // ... load existing logic
        
        // –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–µ–Ω—é
        this.pageSettings.showInMenu = response.show_in_menu ?? true;
        this.pageSettings.menuPosition = response.menu_position;
        this.pageSettings.menuLabel = response.menu_label;
    }
}
```

---

### **–≠—Ç–∞–ø 5: –û–±–Ω–æ–≤–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π —Å–∞–π—Ç**

**5.1. –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–µ–Ω—é:**

```html
<!-- frontend/index.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{{ siteName }}</title>
    <script src="https://unpkg.com/vue@3.3.4/dist/vue.global.js"></script>
</head>
<body>
    <div id="app">
        <header class="main-header">
            <div class="container">
                <a href="/" class="logo">{{ siteName }}</a>
                
                <!-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–µ–Ω—é -->
                <nav class="main-nav">
                    <ul>
                        <li v-for="item in menuItems" :key="item.slug">
                            <a 
                                :href="item.url" 
                                :class="{ active: currentSlug === item.slug }"
                            >
                                {{ item.label }}
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </header>
        
        <main>
            <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
            <div v-for="block in pageBlocks" :key="block.id">
                <!-- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –±–ª–æ–∫–æ–≤ -->
            </div>
        </main>
    </div>
    
    <script type="module" src="./site.js"></script>
</body>
</html>
```

**5.2. –°–æ–∑–¥–∞—Ç—å `site.js`:**

```javascript
// frontend/site.js
import ApiClient from './api-client.js';

const { createApp } = Vue;

createApp({
    data() {
        return {
            siteName: 'Healthcare Hacks Brazil',
            menuItems: [],
            pageBlocks: [],
            currentSlug: window.location.pathname.replace('/', '') || 'index'
        }
    },
    
    async mounted() {
        await this.loadMenu();
        await this.loadPage();
    },
    
    methods: {
        async loadMenu() {
            try {
                const apiClient = new ApiClient();
                const response = await apiClient.getPublicMenu();
                this.menuItems = response.data || [];
                console.log('Loaded menu:', this.menuItems);
            } catch (error) {
                console.error('Failed to load menu:', error);
                this.menuItems = [];
            }
        },
        
        async loadPage() {
            try {
                const apiClient = new ApiClient();
                const page = await apiClient.getPageBySlug(this.currentSlug);
                this.pageBlocks = page.blocks || [];
                document.title = page.title;
            } catch (error) {
                console.error('Failed to load page:', error);
                // Show 404
            }
        }
    }
}).mount('#app');
```

**5.3. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –≤ `api-client.js`:**

```javascript
// frontend/api-client.js

async getPublicMenu() {
    return await this.request('/api/menu/public', {
        method: 'GET'
    });
}
```

---

### **–≠—Ç–∞–ø 6: UX –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞**

**–°—Ü–µ–Ω–∞—Ä–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

1. **–°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**
   - –ö–ª–∏–µ–Ω—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä
   - –°–æ–∑–¥–∞—ë—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É "–ì–∞–π–¥ –ø–æ SUS"
   - –í–∏–¥–∏—Ç —á–µ–∫–±–æ–∫—Å ‚úÖ "–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤ –º–µ–Ω—é —Å–∞–π—Ç–∞" (–≤–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

2. **–ü—É–±–ª–∏–∫–∞—Ü–∏—è:**
   - –ö–ª–∏–µ–Ω—Ç –Ω–∞–∂–∏–º–∞–µ—Ç "–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å"
   - –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å `status='published'`, `show_in_menu=true`

3. **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É `/gaid-po-sus`
   - **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –º–µ–Ω—é: "–ì–ª–∞–≤–Ω–∞—è | –ì–∞–π–¥ –ø–æ SUS | –ë–ª–æ–≥"

4. **–°–Ω—è—Ç—å —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:**
   - –ö–ª–∏–µ–Ω—Ç –Ω–∞–∂–∏–º–∞–µ—Ç "–°–Ω—è—Ç—å —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏"
   - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏—Å—á–µ–∑–∞–µ—Ç –∏–∑ –º–µ–Ω—é (status='draft')

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

- **–ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫:** –í–≤–µ—Å—Ç–∏ "–ü–æ–∑–∏—Ü–∏—è –≤ –º–µ–Ω—é: 2" ‚Üí —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±—É–¥–µ—Ç –≤—Ç–æ—Ä–æ–π
- **–ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ:** "–ù–∞–∑–≤–∞–Ω–∏–µ –≤ –º–µ–Ω—é: SUS" ‚Üí –≤ –º–µ–Ω—é –±—É–¥–µ—Ç "SUS" –≤–º–µ—Å—Ç–æ "–ì–∞–π–¥ –ø–æ SUS"
- **–£–±—Ä–∞—Ç—å –∏–∑ –º–µ–Ω—é:** –°–Ω—è—Ç—å —á–µ–∫–±–æ–∫—Å "–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤ –º–µ–Ω—é" ‚Üí —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ —Å—Å—ã–ª–∫–µ, –Ω–æ –Ω–µ –≤ –º–µ–Ω—é

---

## üóëÔ∏è –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å Menu Editor?

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –£–¥–∞–ª–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é**
- –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω –í–∞—Ä–∏–∞–Ω—Ç 1 (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–µ–Ω—é)
- –ú–µ–Ω—é —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –û—Å—Ç–∞–≤–∏—Ç—å –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**
- –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö —Å—Å—ã–ª–æ–∫ ("–ë–æ—Ç" ‚Üí Telegram)
- –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è "—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö" –ø—É–Ω–∫—Ç–æ–≤ (–Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º)
- –°–∫—Ä—ã—Ç—å –æ—Ç –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ç–æ–ª—å–∫–æ super_admin)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–¥–∞–ª–∏—Ç—å Menu Editor, –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ "–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞" –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

```html
<div class="form-group">
    <label>
        <input type="checkbox" v-model="pageSettings.isExternalLink">
        –≠—Ç–æ –≤–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞ (–Ω–µ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–∞–π—Ç–∞)
    </label>
</div>

<div class="form-group" v-if="pageSettings.isExternalLink">
    <label>URL</label>
    <input 
        type="url" 
        v-model="pageSettings.externalUrl" 
        placeholder="https://t.me/your_bot"
    >
</div>
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –í–∞—Ä–∏–∞–Ω—Ç 1 (–ê–≤—Ç–æ) | –í–∞—Ä–∏–∞–Ω—Ç 2 (–ì–∏–±—Ä–∏–¥) | Menu Editor (—Å—Ç–∞—Ä—ã–π) |
|----------|------------------|---------------------|----------------------|
| **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê |
| **–°–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (1-2 –¥–Ω—è) | ‚≠ê‚≠ê‚≠ê (3-5 –¥–Ω–µ–π) | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| **–ì–∏–±–∫–æ—Å—Ç—å** | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê |
| **–í–Ω–µ—à–Ω–∏–µ —Å—Å—ã–ª–∫–∏** | ‚ùå | ‚úÖ | ‚úÖ |
| **–ü–æ–¥–º–µ–Ω—é (–≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å)** | ‚ùå | ‚úÖ | ‚úÖ |
| **–ê–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** | ‚úÖ | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | ‚ùå |
| **–†–∏—Å–∫ "–±–∏—Ç—ã—Ö" —Å—Å—ã–ª–æ–∫** | ‚ùå –ù–µ—Ç | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–∏–π | ‚ö†Ô∏è –í—ã—Å–æ–∫–∏–π |

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### **–°–µ–π—á–∞—Å (–Ω–µ–¥–µ–ª—è 1):**
1. ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞–¥ Menu Editor
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é `011_add_menu_fields_to_pages.sql`
3. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å Backend API (endpoint `/api/menu/public`)
4. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä (–¥–æ–±–∞–≤–∏—Ç—å UI –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–µ–Ω—é)
5. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: —Å–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Üí –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ–Ω—é

### **–ü–æ–∑–∂–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):**
6. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –≤–Ω–µ—à–Ω–∏—Ö —Å—Å—ã–ª–æ–∫ (—á–µ–∫–±–æ–∫—Å "–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞")
7. ‚è≥ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–¥–º–µ–Ω—é (—Ä–æ–¥–∏—Ç–µ–ª—å-–ø–æ—Ç–æ–º–æ–∫) ‚Äî —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç—É –Ω—É–∂–Ω–æ

---

## üéì –î–ª—è "–ø—Ä–æ–¥–∞–≤—Ü–∞ –º–∞–Ω–¥–∞—Ä–∏–Ω–æ–≤"

**–ß—Ç–æ –∫–ª–∏–µ–Ω—Ç –≤–∏–¥–∏—Ç:**

1. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä ‚Üí —Å–æ–∑–¥–∞—ë—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É "–ú–æ–∏ —É—Å–ª—É–≥–∏"
2. –ó–∞–ø–æ–ª–Ω—è–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç (–±–ª–æ–∫–∏ —Ç–µ–∫—Å—Ç–∞, –∫–∞—Ä—Ç–∏–Ω–∫–∏)
3. –í–∏–¥–∏—Ç —Å–ø—Ä–∞–≤–∞:
   - ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤ –º–µ–Ω—é —Å–∞–π—Ç–∞
   - –ü–æ–∑–∏—Ü–∏—è: [–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏]
4. –ù–∞–∂–∏–º–∞–µ—Ç "–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å"
5. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –º–µ–Ω—é —Å–∞–π—Ç–∞!**

**–ë–µ–∑:**
- ‚ùå –ê–¥–º–∏–Ω–∫–∏ –º–µ–Ω—é
- ‚ùå –†—É—á–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—É–Ω–∫—Ç–æ–≤
- ‚ùå –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚ùå –†–∏—Å–∫–∞ "–∑–∞–±—ã—Ç—å –¥–æ–±–∞–≤–∏—Ç—å –≤ –º–µ–Ω—é"

---

## üìù TODO

- [ ] –û–±—Å—É–¥–∏—Ç—å —Å –ê–Ω–Ω–æ–π: –í–∞—Ä–∏–∞–Ω—Ç 1 –∏–ª–∏ 2?
- [ ] –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é SQL
- [ ] –û–±–Ω–æ–≤–∏—Ç—å CMS_DEVELOPMENT_PLAN.md
- [ ] –£–¥–∞–ª–∏—Ç—å MENU_EDITOR_PROMPT.md (–±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω)
- [ ] –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª—ã menu-editor.html/js/css
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å UX

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 5 –æ–∫—Ç—è–±—Ä—è 2025  
**–ê–≤—Ç–æ—Ä:** Claude + Anna
